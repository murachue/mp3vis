(this.webpackJsonpmp3vis=this.webpackJsonpmp3vis||[]).push([[0],{20:function(e,t,a){e.exports=a(30)},25:function(e,t,a){},27:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),s=a.n(c),l=(a(25),a(3)),i=a.n(l),o=a(1),u=a(4),f=a(7),h=a(5),b=a(2);a(27);function d(e){var t=e.checks,a=e.onChanged,c=Object(n.useState)(null),s=Object(b.a)(c,2),l=s[0],i=s[1],o=function(e){return function(n){var r=Object(u.a)(t),c=null!==l&&n.shiftKey,s=c?Math.min(l,e):e,o=c?Math.max(l,e):e,f=!t[e];r.fill(f,s,o+1),a(r),i(e)}};return r.a.createElement("div",null,t.map((function(e,t){return r.a.createElement("input",{type:"checkbox",checked:e,onChange:function(){},onClick:o(t),key:t})})))}var p=a(13),m=a(17),v=a(18),g=a(33),y=a(32);function O(e,t,a){return e>>8-a-t&(1<<a)-1}var k=function(){function e(t){Object(m.a)(this,e),this.u8=void 0,this.atebits=void 0,this.bits=void 0,this.bypos=void 0,this.u8=t,this.bypos=0,this.atebits=0,this.bits=null}return Object(v.a)(e,[{key:"readbits",value:function(){var e=Object(h.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(0<t)){e.next=13;break}if(!(null===this.bits||8<=this.atebits)){e.next=7;break}if(!this.eof()){e.next=5;break}throw new Error("!eof");case 5:8<=this.atebits&&(this.bypos+=1,this.atebits=0),this.bits=this.u8[this.bypos];case 7:n=Math.min(8-this.atebits,t),a=a<<n|O(this.bits,this.atebits,n),this.atebits+=n,t-=n,e.next=1;break;case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readbytes",value:function(){var e=Object(h.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.byteboundary(),a=this.nextbyte(),n=Math.min(this.u8.length-a,t),r=this.u8.slice(a,a+n),this.bypos+=n,!(n<t)){e.next=7;break}throw new Error("!eof");case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findbyte",value:function(){var e=Object(h.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.byteboundary(),-1!==(a=this.u8.indexOf(t,this.nextbyte()))){e.next=4;break}return e.abrupt("return",!1);case 4:return this.seek(8*a),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"byteboundary",value:function(){if(this.atebits%8!==0)throw new Error("not byte boundary tell=".concat(this.tell()))}},{key:"nextbyte",value:function(){return this.bypos+this.atebits/8}},{key:"seek",value:function(e){e=Math.min(e,8*this.u8.length),this.bypos=Math.floor(e/8),this.atebits=e%8,this.bits=null}},{key:"tell",value:function(){return 8*this.bypos+this.atebits}},{key:"eof",value:function(){return this.u8.length<=this.nextbyte()}},{key:"length",get:function(){return 8*this.u8.length}}]),e}();function x(e){return j.apply(this,arguments)}function j(){return(j=Object(h.a)(i.a.mark((function e(t){var a,n,r,c,s,l,o,u,f,h,b,d,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readbits(12);case 2:if(4095===(a=e.sent)){e.next=5;break}throw new Error("!sync");case 5:return e.next=7,t.readbits(1);case 7:if(0!==(n=e.sent)){e.next=10;break}throw new Error("!id");case 10:return e.next=12,t.readbits(2);case 12:if(0!==(r=e.sent)){e.next=15;break}throw new Error("!layer");case 15:if(1===r){e.next=17;break}throw new Error("!non-layer3 not supported yet");case 17:return e.next=19,t.readbits(1);case 19:return c=e.sent,e.next=22,t.readbits(4);case 22:return s=e.sent,e.next=25,t.readbits(2);case 25:if(3!==(l=e.sent)){e.next=28;break}throw new Error("!sampfreq");case 28:return e.next=30,t.readbits(1);case 30:return o=e.sent,e.next=33,t.readbits(1);case 33:return u=e.sent,e.next=36,t.readbits(2);case 36:return f=e.sent,e.next=39,t.readbits(2);case 39:return h=e.sent,e.next=42,t.readbits(1);case 42:return b=e.sent,e.next=45,t.readbits(1);case 45:return d=e.sent,e.next=48,t.readbits(2);case 48:if(2!==(p=e.sent)){e.next=51;break}throw new Error("!emph");case 51:return e.abrupt("return",{syncword:a,id:n,layer:r,protection_bit:c,bitrate_index:s,sampling_frequency:l,padding_bit:o,private_bit:u,mode:f,mode_extension:h,copyright:b,original:d,emphasis:p});case 52:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){return w.apply(this,arguments)}function w(){return(w=Object(h.a)(i.a.mark((function e(t,a){var n,r,c,s,l,u,b,d,p,m,v,y,O,k,x,j,_,w,E,C,F,M,S,z,R;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=3===a.mode,r=n?1:2,e.next=4,t.readbits(9);case 4:return c=e.sent,e.next=7,t.readbits(n?5:3);case 7:s=e.sent,l=[],u=Object(o.a)(Object(g.a)(r)),e.prev=10,u.s();case 12:if((b=u.n()).done){e.next=38;break}b.value,d=[],p=Object(o.a)(Object(g.a)(4)),e.prev=16,p.s();case 18:if((m=p.n()).done){e.next=27;break}return m.value,e.t0=d,e.next=23,t.readbits(1);case 23:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 25:e.next=18;break;case 27:e.next=32;break;case 29:e.prev=29,e.t2=e.catch(16),p.e(e.t2);case 32:return e.prev=32,p.f(),e.finish(32);case 35:l.push(d);case 36:e.next=12;break;case 38:e.next=43;break;case 40:e.prev=40,e.t3=e.catch(10),u.e(e.t3);case 43:return e.prev=43,u.f(),e.finish(43);case 46:v=[],y=Object(o.a)(Object(g.a)(2)),e.prev=48,y.s();case 50:if((O=y.n()).done){e.next=72;break}O.value,k=[],x=Object(o.a)(Object(g.a)(r)),e.prev=54,_=i.a.mark((function e(){var a,n,r,c,s,l,u,b,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j.value,e.next=3,t.readbits(12);case 3:return a=e.sent,e.next=6,t.readbits(9);case 6:return n=e.sent,e.next=9,t.readbits(8);case 9:return r=e.sent,e.next=12,t.readbits(4);case 12:return c=e.sent,e.next=15,t.readbits(1);case 15:return s=e.sent,e.next=18,Object(h.a)(i.a.mark((function e(){var a,n,r,c,l,u,f,h,b,d,p,m,v,y,O;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=58;break}return e.next=3,t.readbits(2);case 3:return a=e.sent,e.next=6,t.readbits(1);case 6:n=e.sent,r=[],c=Object(o.a)(Object(g.a)(2)),e.prev=9,c.s();case 11:if((l=c.n()).done){e.next=20;break}return l.value,e.t0=r,e.next=16,t.readbits(5);case 16:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 18:e.next=11;break;case 20:e.next=25;break;case 22:e.prev=22,e.t2=e.catch(9),c.e(e.t2);case 25:return e.prev=25,c.f(),e.finish(25);case 28:u=[],f=Object(o.a)(Object(g.a)(3)),e.prev=30,f.s();case 32:if((h=f.n()).done){e.next=41;break}return h.value,e.t3=u,e.next=37,t.readbits(3);case 37:e.t4=e.sent,e.t3.push.call(e.t3,e.t4);case 39:e.next=32;break;case 41:e.next=46;break;case 43:e.prev=43,e.t5=e.catch(30),f.e(e.t5);case 46:return e.prev=46,f.f(),e.finish(46);case 49:if(0!==a){e.next=51;break}throw new Error("!reserved:inconsistency-normal-window blocksplit_flag=1 but block_type=0");case 51:if(1!==n||2===a){e.next=53;break}throw new Error("!ReadTheF*ckingSpec: switch_point become 1 only if block_type is 2 but ".concat(a));case 53:return d=20-(b=2===a&&0===n?8:7),e.abrupt("return",{blocksplit_flag:!0,block_type:a,switch_point:n,table_select:r,subblock_gain:u,region_address1:b,region_address2:d});case 58:p=[],m=Object(o.a)(Object(g.a)(3)),e.prev=60,m.s();case 62:if((v=m.n()).done){e.next=71;break}return v.value,e.t6=p,e.next=67,t.readbits(5);case 67:e.t7=e.sent,e.t6.push.call(e.t6,e.t7);case 69:e.next=62;break;case 71:e.next=76;break;case 73:e.prev=73,e.t8=e.catch(60),m.e(e.t8);case 76:return e.prev=76,m.f(),e.finish(76);case 79:return e.next=81,t.readbits(4);case 81:return y=e.sent,e.next=84,t.readbits(3);case 84:return O=e.sent,e.abrupt("return",{blocksplit_flag:!1,block_type:0,switch_point:null,table_select:p,subblock_gain:null,region_address1:y,region_address2:O});case 86:case"end":return e.stop()}}),e,null,[[9,22,25,28],[30,43,46,49],[60,73,76,79]])})))();case 18:return l=e.sent,e.next=21,t.readbits(1);case 21:return u=e.sent,e.next=24,t.readbits(1);case 24:return b=e.sent,e.next=27,t.readbits(1);case 27:d=e.sent,k.push(Object(f.a)({part2_3_length:a,big_values:n,global_gain:r,scalefac_compress:c},l,{preflag:u,scalefac_scale:b,count1table_select:d}));case 29:case"end":return e.stop()}}),e)})),x.s();case 57:if((j=x.n()).done){e.next=61;break}return e.delegateYield(_(),"t4",59);case 59:e.next=57;break;case 61:e.next=66;break;case 63:e.prev=63,e.t5=e.catch(54),x.e(e.t5);case 66:return e.prev=66,x.f(),e.finish(66);case 69:v.push({channel:k});case 70:e.next=50;break;case 72:e.next=77;break;case 74:e.prev=74,e.t6=e.catch(48),y.e(e.t6);case 77:return e.prev=77,y.f(),e.finish(77);case 80:w=[],E=Object(o.a)(Object(g.a)(r));try{for(E.s();!(C=E.n()).done;){F=C.value,M=[],S=Object(o.a)(Object(g.a)(2));try{for(S.s();!(z=S.n()).done;)R=z.value,M.push(v[R].channel[F])}catch(P){S.e(P)}finally{S.f()}w.push({scfsi:l[F],granule:M})}}catch(P){E.e(P)}finally{E.f()}return e.abrupt("return",{main_data_end:c,private_bits:s,channel:w});case 84:case"end":return e.stop()}}),e,null,[[10,40,43,46],[16,29,32,35],[48,74,77,80],[54,63,66,69]])})))).apply(this,arguments)}var E=[44100,48e3,32e3];function C(e){var t=F[e.bitrate_index-1],a=E[e.sampling_frequency];return Math.floor(144*t*1e3/a)+e.padding_bit}var F=[32,40,48,56,64,80,96,112,128,160,192,224,256,320];function M(e){return S.apply(this,arguments)}function S(){return(S=Object(h.a)(i.a.mark((function e(t){var a,n,r,c,s,l,o,u,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.tell()/8,e.next=3,x(t);case 3:if(0!==(n=e.sent).protection_bit){e.next=10;break}return e.next=7,t.readbits(16);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=null;case 11:if(r=e.t0,1===n.layer){e.next=14;break}throw new Error("!not-layer3");case 14:return e.next=16,_(t,n);case 16:if(c=e.sent,0!==n.bitrate_index){e.next=19;break}throw new Error("free-format not supported yet");case 19:return s=t.tell()/8-a,e.next=22,Object(h.a)(i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tell(),t.seek(8*a),e.next=4,t.readbytes(s);case 4:return r=e.sent,t.seek(n),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))();case 22:return l=e.sent,o=C(n),e.next=26,t.readbytes(o-s);case 26:return u=e.sent,f=t.tell()/8-a,e.abrupt("return",{offset:a,header:n,crc_check:r,sideinfo:c,head_side_size:s,head_side_bytes:l,data:u,totalsize:f});case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t){var a=new e.constructor(e.length+t.length);return a.set(e),a.set(t,e.length),a}function R(e,t){var a=e.map((function(e){return e.data})).reduce((function(e,t){return z(e,t)}),new Uint8Array);return a.length<t.sideinfo.main_data_end?null:z(a.slice(a.length-t.sideinfo.main_data_end),t.data)}var P=[[[[[[[[[[[[14,15],[15,14]],[[13,15],[15,13]]],[[[12,15],[15,12]],[[11,15],[15,11]]]],[[[10,15],[[15,10],[9,15]]],[[[15,9],[15,8]],[8,15]]]],[[[[7,15],[15,7]],[[6,15],[15,6]]],[15,15]]],[[[[[5,15],[15,5]],[4,15]],[[15,4],[15,3]]],[[[15,0],[[3,15],[[[[[[[12,14],[[14,12],[13,13]]],[13,14]],[[14,9],[[14,10],[13,9]]]],[[14,14],[[14,13],[14,11]]]],[[[11,14],[12,13]],[[[13,12],[13,11]],[10,14]]]],[[[[12,12],[[10,13],[13,10]]],[[[7,14],[10,12]],[12,10]]],[[[[12,9],[7,13]],[5,14]],[11,13]]]]]],[15,2]]]],[[[[[2,15],[0,15]],[1,15]],[[15,1],[[[[[[9,14],[[11,12],[12,11]]],[[[8,14],[14,8]],[[9,13],[14,7]]]],[[[[11,11],[8,13]],[[13,8],[6,14]]],[[14,6],[9,12]]]],[[[[[10,11],[11,10]],[[14,5],[13,7]]],[[4,14],[[14,4],[8,12]]]],[[[12,8],[3,14]],[[6,13],[[13,6],[9,11]]]]]],[[[[[[11,9],[10,10]],[14,1]],[[13,4],[[11,8],[10,9]]]],[[[7,11],[[11,7],[13,0]]],[14,3]]],[[[[0,14],[14,0]],[[5,13],[13,5]]],[[[7,12],[12,7]],[[4,13],[8,11]]]]]]]],[[[[[[[[9,10],[6,12]],[[12,6],[3,13]]],[[[5,12],[12,5]],[0,13]]],[[[[8,10],[10,8]],[[9,9],[4,12]]],[[[11,6],[7,10]],[3,12]]]],[[[[[5,11],[8,9]],[1,12]],[[12,0],[[9,8],[7,9]]]],[[14,2],[[2,14],[1,14]]]]],[[[[[13,3],[2,13]],[[13,2],[13,1]]],[[[3,11],[[9,7],[8,8]]],[1,13]]],[[[[12,4],[6,11]],[[12,3],[10,7]]],[[2,12],[[12,2],[11,5]]]]]],[[[[[[12,1],[0,12]],[[4,11],[11,4]]],[[[6,10],[10,6]],[11,3]]],[[[[5,10],[10,5]],[2,11]],[[11,2],[1,11]]]],[[[[11,1],[[0,11],[11,0]]],[[[6,9],[9,6]],[[4,10],[10,4]]]],[[[[7,8],[8,7]],[10,3]],[[[3,10],[5,9]],[2,10]]]]]]]],[[[[[[[[[9,5],[6,8]],[10,1]],[[[8,6],[7,7]],[9,4]]],[[[[4,9],[5,7]],[6,7]],[10,2]]],[[[1,10],[[0,10],[10,0]]],[[[3,9],[9,3]],[[5,8],[8,5]]]]],[[[[2,9],[9,2]],[[[7,6],[0,9]],[1,9]]],[[[9,1],[[9,0],[4,8]]],[[[8,4],[7,5]],[[3,8],[8,3]]]]]],[[[[[[6,6],[2,8]],[8,2]],[[[4,7],[7,4]],[1,8]]],[[[8,1],[8,0]],[[[0,8],[5,6]],[3,7]]]],[[[[7,3],[[6,5],[4,6]]],[[2,7],[7,2]]],[[[[6,4],[5,5]],[0,7]],[1,7]]]]],[[[[[7,1],[[7,0],[3,6]]],[[[6,3],[4,5]],[[5,4],[2,6]]]],[[[6,2],[1,6]],[[6,1],[[0,6],[6,0]]]]],[[[[5,3],[[3,5],[4,4]]],[[2,5],[5,2]]],[[5,1],[[1,5],[0,5]]]]]]],[[[[[[[3,4],[4,3]],[[5,0],[2,4]]],[[[4,2],[3,3]],[1,4]]],[[[4,1],[[0,4],[4,0]]],[[2,3],[3,2]]]],[[[1,3],[3,1]],[[[0,3],[3,0]],[2,2]]]],[[[1,2],[2,1]],[[0,2],[2,0]]]]],[[[1,1],[0,1]],[1,0]]],[0,0]],A=[[[[[[[[[14,15],[15,14]],[[13,15],[15,13]]],[[[12,15],[15,12]],[[11,15],[15,11]]]],[[[15,10],[[10,15],[9,15]]],[[15,9],[15,8]]]],[[[[[8,15],[7,15]],[15,7]],[[6,15],[15,6]]],[[[5,15],[15,5]],[[4,15],[15,4]]]]],[[[[[3,15],[15,3]],[[2,15],[15,2]]],[[[15,1],[[1,15],[15,0]]],[[[[0,15],[[[14,14],[13,14]],[[14,13],[12,14]]]],[[[[14,12],[13,13]],[[11,14],[14,11]]],[[[12,13],[13,12]],[[10,14],[14,10]]]]],[[[[[11,13],[13,11]],[[12,12],[9,14]]],[[[14,9],[10,13]],[[13,10],[11,12]]]],[[[[12,11],[8,14]],[[14,8],[9,13]]],[[[13,9],[7,14]],[[14,7],[10,12]]]]]]]],[15,15]]],[[[[[[[[[[12,10],[11,11]],[[8,13],[13,8]]],[[[[0,14],[14,0]],[0,13]],[14,6]]],[[[[6,14],[9,12]],[12,9]],[[5,14],[11,10]]]],[[[[14,5],[[10,11],[7,13]]],[[13,7],[14,4]]],[[[8,12],[12,8]],[[[4,14],[2,14]],[3,14]]]]],[[[[[6,13],[13,6]],[[14,3],[9,11]]],[[[11,9],[10,10]],[[14,2],[1,14]]]],[[[[14,1],[5,13]],[[13,5],[7,12]]],[[[12,7],[4,13]],[[8,11],[11,8]]]]]],[[[[[[13,4],[9,10]],[[10,9],[6,12]]],[[[12,6],[3,13]],[[13,3],[2,13]]]],[[[[13,2],[1,13]],[[7,11],[11,7]]],[[[13,1],[5,12]],[[12,5],[8,10]]]]],[[[[[10,8],[9,9]],[[4,12],[12,4]]],[[[6,11],[11,6]],[[[13,0],[0,12]],[3,12]]]],[[[[12,3],[7,10]],[[10,7],[2,12]]],[[[12,2],[5,11]],[[11,5],[1,12]]]]]]],[[[[[[[8,9],[9,8]],[[12,1],[4,11]]],[[[[12,0],[0,11]],[3,11]],[[[11,0],[0,10]],[1,10]]]],[[[11,4],[[6,10],[10,6]]],[[[7,9],[9,7]],[[[10,0],[0,9]],[9,0]]]]],[[[[11,3],[8,8]],[[[2,11],[5,10]],[11,2]]],[[[[10,5],[1,11]],[[11,1],[6,9]]],[[9,6],[10,4]]]]],[[[[[[4,10],[7,8]],[8,7]],[[3,10],[10,3]]],[[[5,9],[9,5]],[[2,10],[10,2]]]],[[[[10,1],[6,8]],[[8,6],[7,7]]],[[[4,9],[9,4]],[[3,9],[9,3]]]]]]],[[[[[[[5,8],[8,5]],[[2,9],[6,7]]],[[[7,6],[9,2]],[[1,9],[9,1]]]],[[[[4,8],[8,4]],[[5,7],[7,5]]],[[[3,8],[8,3]],[[6,6],[2,8]]]]],[[[[[8,2],[1,8]],[[4,7],[7,4]]],[[[8,1],[[0,8],[8,0]]],[[5,6],[6,5]]]],[[[[1,7],[[0,7],[7,0]]],[7,3]],[[[3,7],[2,7]],[7,2]]]]],[[[[[4,6],[6,4]],[[5,5],[7,1]]],[[[3,6],[6,3]],[[4,5],[5,4]]]],[[[[2,6],[6,2]],[[1,6],[6,1]]],[[[[0,6],[6,0]],[3,5]],[[5,3],[4,4]]]]]]]],[[[[[[[[2,5],[5,2]],[[1,5],[[0,5],[5,0]]]],[[5,1],[[3,4],[4,3]]]],[[[2,4],[4,2]],[[3,3],[1,4]]]],[[[[4,1],[[0,4],[4,0]]],[[2,3],[3,2]]],[[1,3],[3,1]]]],[[[[[0,3],[3,0]],[2,2]],[1,2]],[[2,1],[[0,2],[2,0]]]]],[[[1,1],[0,1]],[[1,0],[0,0]]]]],T=[[[[[[[[1,0,1,1],[1,1,1,1]],[[1,1,0,1],[1,1,1,0]]],[[[0,1,1,1],[0,1,0,1]],[1,0,0,1]]],[[[0,1,1,0],[0,0,1,1]],[[1,0,1,0],[1,1,0,0]]]],[[[0,0,1,0],[0,0,0,1]],[[0,1,0,0],[1,0,0,0]]]],[0,0,0,0]],[[[[[1,1,1,1],[1,1,1,0]],[[1,1,0,1],[1,1,0,0]]],[[[1,0,1,1],[1,0,1,0]],[[1,0,0,1],[1,0,0,0]]]],[[[[0,1,1,1],[0,1,1,0]],[[0,1,0,1],[0,1,0,0]]],[[[0,0,1,1],[0,0,1,0]],[[0,0,0,1],[0,0,0,0]]]]]],q=[{table:null},{table:[[[[1,1],[0,1]],[1,0]],[0,0]],linbits:0},{table:[[[[[[[2,2],[0,2]],[1,2]],[[2,1],[2,0]]],[1,1]],[[0,1],[1,0]]],[0,0]],linbits:0},{table:[[[[[[[2,2],[0,2]],[1,2]],[[2,1],[2,0]]],[1,0]],[1,1]],[[0,1],[0,0]]],linbits:0},{table:null},{table:[[[[[[[[[3,3],[2,3]],[3,2]],[3,1]],[[[1,3],[0,3]],[[3,0],[2,2]]]],[[[1,2],[2,1]],[[0,2],[2,0]]]],[1,1]],[[0,1],[1,0]]],[0,0]],linbits:0},{table:[[[[[[[[3,3],[0,3]],[2,3]],[[3,2],[3,0]]],[[1,3],[3,1]]],[[[2,2],[0,2]],[1,2]]],[[[2,1],[2,0]],[0,1]]],[[1,1],[[1,0],[0,0]]]],linbits:0},{table:[[[[[[[[[[[5,5],[4,5]],[[5,4],[5,3]]],[[3,5],[4,4]]],[[[2,5],[5,2]],[1,5]]],[[[5,1],[[0,5],[3,4]]],[[5,0],[[4,3],[3,3]]]]],[[[[2,4],[4,2]],[1,4]],[[4,1],[4,0]]]],[[[[[0,4],[2,3]],[[3,2],[0,3]]],[[1,3],[3,1]]],[[[3,0],[2,2]],[1,2]]]],[[[2,1],[[0,2],[2,0]]],[1,1]]],[[0,1],[1,0]]],[0,0]],linbits:0},{table:[[[[[[[[[[[[5,5],[5,4]],[4,5]],[5,3]],[[[3,5],[4,4]],[2,5]]],[[[5,2],[0,5]],[1,5]]],[[[5,1],[[3,4],[4,3]]],[[[5,0],[3,3]],[2,4]]]],[[[[4,2],[1,4]],[4,1]],[[[0,4],[4,0]],[[2,3],[3,2]]]]],[[[[[1,3],[3,1]],[[0,3],[3,0]]],[2,2]],[[0,2],[2,0]]]],[[1,2],[2,1]]],[1,1]],[[[0,1],[1,0]],[0,0]]],linbits:0},{table:[[[[[[[[[[5,5],[4,5]],[3,5]],[[5,3],[[5,4],[0,5]]]],[[[4,4],[2,5]],[[5,2],[1,5]]]],[[[5,1],[3,4]],[[4,3],[[5,0],[0,4]]]]],[[[[2,4],[4,2]],[[3,3],[4,0]]],[[1,4],[4,1]]]],[[[[2,3],[3,2]],[1,3]],[[3,1],[[0,3],[3,0]]]]],[[[[2,2],[0,2]],[1,2]],[[2,1],[2,0]]]],[[[1,1],[0,1]],[[1,0],[0,0]]]],linbits:0},{table:[[[[[[[[[[[[7,7],[6,7]],[[7,6],[5,7]]],[[[7,5],[6,6]],[4,7]]],[[[7,4],[5,6]],[[6,5],[3,7]]]],[[[[7,3],[4,6]],[[[5,5],[5,4]],[6,3]]],[[2,7],[7,2]]]],[[[[[6,4],[0,7]],[7,0]],[[6,2],[[4,5],[3,5]]]],[[[0,6],[[5,3],[4,4]]],[1,7]]]],[[[[7,1],[[3,6],[2,6]]],[[[[2,5],[5,2]],[1,5]],[[5,1],[[3,4],[4,3]]]]],[[[1,6],[6,1]],[[6,0],[[0,5],[5,0]]]]]],[[[[[[2,4],[4,2]],[[3,3],[0,4]]],[[1,4],[4,1]]],[[[4,0],[2,3]],[[3,2],[0,3]]]],[[[1,3],[3,1]],[[3,0],[2,2]]]]],[[[[1,2],[2,1]],[[0,2],[2,0]]],[1,1]]],[[0,1],[1,0]]],[0,0]],linbits:0},{table:[[[[[[[[[[[7,7],[6,7]],[[7,6],[7,5]]],[[[6,6],[4,7]],[[7,4],[[5,7],[5,5]]]]],[[[[5,6],[6,5]],[3,7]],[[7,3],[4,6]]]],[[[[[4,5],[5,4]],[[3,5],[5,3]]],[2,7]],[[7,2],[[6,4],[0,7]]]]],[[[7,1],[[1,7],[7,0]]],[[[3,6],[6,3]],[[6,0],[[4,4],[2,5]]]]]],[[[[[[5,2],[0,5]],[1,5]],[6,2]],[[[2,6],[0,6]],[1,6]]],[[[6,1],[[5,1],[3,4]]],[[[5,0],[[4,3],[3,3]]],[[2,4],[4,2]]]]]],[[[[[[1,4],[4,1]],[[0,4],[4,0]]],[[2,3],[3,2]]],[[1,3],[3,1]]],[[[[0,3],[3,0]],[2,2]],[2,1]]]],[[[1,2],[[0,2],[2,0]]],[1,1]]],[[[0,1],[1,0]],[0,0]]],linbits:0},{table:[[[[[[[[[[[7,7],[6,7]],[7,6]],[[5,7],[7,5]]],[[[6,6],[4,7]],[[7,4],[6,5]]]],[[[5,6],[3,7]],[[[7,3],[5,5]],[2,7]]]],[[[[7,2],[4,6]],[[6,4],[1,7]]],[[[7,1],[[0,7],[7,0]]],[[3,6],[6,3]]]]],[[[[[4,5],[5,4]],[[4,4],[[0,6],[0,5]]]],[[2,6],[6,2]]],[[[6,1],[[1,6],[6,0]]],[[[3,5],[5,3]],[[2,5],[5,2]]]]]],[[[[[1,5],[5,1]],[[3,4],[4,3]]],[[[[5,0],[0,4]],[2,4]],[[4,2],[1,4]]]],[[[3,3],[4,1]],[[2,3],[3,2]]]]],[[[[[[4,0],[0,3]],[3,0]],[1,3]],[[3,1],[2,2]]],[[1,2],[2,1]]]],[[[[[0,2],[2,0]],[0,0]],[1,1]],[[0,1],[1,0]]]],linbits:0},{table:[[[[[[[[[[[[[[[[[[[[15,14],[15,12]],[15,13]],[14,13]],[15,15]],[[14,15],[13,15]]],[[[14,14],[12,15]],[[13,14],[11,15]]]],[[[[15,11],[12,14]],[[13,12],[[10,15],[14,9]]]],[[14,12],[13,13]]]],[[[[[15,10],[12,13]],[11,14]],[[14,11],[9,15]]],[[[15,9],[14,10]],[[11,13],[13,11]]]]],[[[[[8,15],[15,8]],[[12,12],[[10,14],[9,14]]]],[[[8,14],[[7,15],[7,14]]],[15,7]]],[[[13,10],[[10,13],[11,12]]],[[[12,11],[15,6]],[6,15]]]]],[[[[[14,8],[5,15]],[[9,13],[13,9]]],[[[15,5],[14,7]],[[10,12],[11,11]]]],[[[[4,15],[15,4]],[[[12,10],[14,6]],[15,3]]],[[3,15],[[8,13],[13,8]]]]]],[[[[[2,15],[15,2]],[[[6,14],[9,12]],[0,15]]],[[[[12,9],[5,14]],[10,11]],[[[7,13],[13,7]],[4,14]]]],[[[[[12,8],[13,6]],[3,14]],[[11,9],[[9,11],[10,10]]]],[[1,15],[15,1]]]]],[[[[[15,0],[[11,10],[14,5]]],[[[14,4],[8,12]],[[6,13],[14,3]]]],[[[14,2],[[2,14],[0,14]]],[[1,14],[14,1]]]],[[[[[14,0],[5,13]],[[13,5],[7,12]]],[[[12,7],[4,13]],[[8,11],[11,8]]]],[[[[13,4],[9,10]],[[10,9],[6,12]]],[[12,6],[3,13]]]]]],[[[[[[[13,3],[7,11]],[2,13]],[[13,2],[1,13]]],[[[11,7],[[5,12],[12,5]]],[[[9,9],[7,10]],[12,3]]]],[[[[[10,7],[9,7]],[4,11]],[13,1]],[[[0,13],[13,0]],[[8,10],[10,8]]]]],[[[[[4,12],[12,4]],[[6,11],[11,6]]],[[3,12],[2,12]]],[[[12,2],[5,11]],[[[11,5],[8,9]],[1,12]]]]]],[[[[[[12,1],[[9,8],[0,12]]],[[12,0],[[11,4],[6,10]]]],[[[[10,6],[7,9]],[3,11]],[[11,3],[[8,8],[5,10]]]]],[[[[2,11],[[10,5],[6,9]]],[[10,4],[[7,8],[8,7]]]],[[[9,4],[[7,7],[7,6]]],[11,2]]]],[[[[1,11],[11,1]],[[[0,11],[11,0]],[[9,6],[4,10]]]],[[[[3,10],[10,3]],[[5,9],[9,5]]],[[2,10],[10,2]]]]]],[[[[[[1,10],[10,1]],[[[0,10],[6,8]],[10,0]]],[[[[8,6],[4,9]],[9,3]],[[[3,9],[5,8]],[[8,5],[6,7]]]]],[[[[2,9],[9,2]],[[[5,7],[7,5]],[3,8]]],[[[8,3],[[6,6],[4,7]]],[[[7,4],[5,6]],[[6,5],[7,3]]]]]],[[[[1,9],[9,1]],[[[0,9],[9,0]],[[4,8],[8,4]]]],[[[[7,2],[[4,6],[6,4]]],[2,8]],[[8,2],[1,8]]]]]],[[[[[[[3,7],[2,7]],[1,7]],[[7,1],[[5,5],[0,7]]]],[[[[7,0],[3,6]],[[6,3],[4,5]]],[[[5,4],[2,6]],[[6,2],[3,5]]]]],[[[8,1],[[0,8],[8,0]]],[[[1,6],[6,1]],[[0,6],[6,0]]]]],[[[[[[5,3],[4,4]],[2,5]],[[5,2],[0,5]]],[[1,5],[5,1]]],[[[[3,4],[4,3]],[[5,0],[2,4]]],[[[4,2],[3,3]],[1,4]]]]]],[[[[[4,1],[[0,4],[4,0]]],[[[2,3],[3,2]],[1,3]]],[[[3,1],[0,3]],[[3,0],[2,2]]]],[[[1,2],[2,1]],[[0,2],[2,0]]]]],[[[1,1],[0,1]],[1,0]]],[0,0]],linbits:0},{table:null},{table:[[[[[[[[[[[[[[15,15],[14,15]],[[15,14],[13,15]]],[[14,14],[[15,13],[12,15]]]],[[[[15,12],[13,14]],[[14,13],[11,15]]],[[15,11],[[12,14],[14,12]]]]],[[[[13,13],[10,15]],[[15,10],[11,14]]],[[[14,11],[12,13]],[[13,12],[9,15]]]]],[[[[[15,9],[14,10]],[[11,13],[13,11]]],[[[8,15],[15,8]],[[12,12],[9,14]]]],[[[[14,9],[7,15]],[[15,7],[10,13]]],[[[13,10],[11,12]],[[6,15],[[10,14],[0,15]]]]]]],[[[[[12,11],[15,6]],[[[8,14],[14,8]],[[5,15],[9,13]]]],[[[15,5],[7,14]],[[14,7],[10,12]]]],[[[[12,10],[11,11]],[[[13,9],[8,13]],[4,15]]],[[[15,4],[3,15]],[[15,3],[13,8]]]]]],[[[[[[14,6],[2,15]],[[15,2],[[6,14],[15,0]]]],[[[1,15],[15,1]],[[9,12],[12,9]]]],[[[[5,14],[10,11]],[[11,10],[14,5]]],[[[7,13],[13,7]],[[4,14],[14,4]]]]],[[[[[8,12],[12,8]],[[3,14],[6,13]]],[[[13,6],[14,3]],[[9,11],[11,9]]]],[[[[2,14],[10,10]],[[14,2],[1,14]]],[[[14,1],[[0,14],[14,0]]],[[5,13],[13,5]]]]]]],[[[[[[[7,12],[12,7]],[[4,13],[8,11]]],[[13,4],[[11,8],[9,10]]]],[[[[10,9],[6,12]],[[12,6],[3,13]]],[[13,3],[13,2]]]],[[[[[2,13],[0,13]],[1,13]],[[7,11],[11,7]]],[[[13,1],[[5,12],[13,0]]],[[12,5],[8,10]]]]],[[[[[10,8],[4,12]],[[12,4],[6,11]]],[[[11,6],[[9,9],[0,12]]],[[3,12],[12,3]]]],[[[[7,10],[10,7]],[[10,6],[[12,0],[0,11]]]],[[12,2],[[2,12],[5,11]]]]]]],[[[[[[[11,5],[1,12]],[[8,9],[9,8]]],[[[12,1],[4,11]],[[11,4],[6,10]]]],[[[[3,11],[7,9]],[11,3]],[[[9,7],[8,8]],[[2,11],[5,10]]]]],[[[[11,2],[[10,5],[1,11]]],[[11,1],[[11,0],[6,9]]]],[[[[9,6],[4,10]],[[10,4],[7,8]]],[[[8,7],[3,10]],[10,3]]]]],[[[[[5,9],[9,5]],[[2,10],[10,2]]],[[[1,10],[10,1]],[[[0,10],[10,0]],[6,8]]]],[[[[8,6],[4,9]],[[9,4],[3,9]]],[[[9,3],[[7,7],[0,9]]],[[5,8],[8,5]]]]]]],[[[[[[[2,9],[6,7]],[[7,6],[9,2]]],[[9,1],[[1,9],[9,0]]]],[[[[4,8],[8,4]],[[5,7],[7,5]]],[[[3,8],[8,3]],[[6,6],[4,7]]]]],[[[[2,8],[8,2]],[[1,8],[8,1]]],[[[[7,4],[0,8]],[[8,0],[5,6]]],[[[6,5],[3,7]],[[7,3],[4,6]]]]]],[[[[[2,7],[7,2]],[[6,4],[1,7]]],[[[5,5],[7,1]],[[[0,7],[7,0]],[3,6]]]],[[[[6,3],[4,5]],[[5,4],[2,6]]],[[[6,2],[1,6]],[[[0,6],[6,0]],[3,5]]]]]]],[[[[[[6,1],[[5,3],[4,4]]],[[2,5],[5,2]]],[[[1,5],[5,1]],[[[0,5],[5,0]],[3,4]]]],[[[[4,3],[2,4]],[[4,2],[3,3]]],[[4,1],[[1,4],[0,4]]]]],[[[[2,3],[3,2]],[[[4,0],[0,3]],[1,3]]],[[[3,1],[3,0]],[2,2]]]]],[[[[[1,2],[2,1]],[[0,2],[2,0]]],[1,1]],[[[0,1],[1,0]],[0,0]]]],linbits:0},{table:P,linbits:1},{table:P,linbits:2},{table:P,linbits:3},{table:P,linbits:4},{table:P,linbits:6},{table:P,linbits:8},{table:P,linbits:10},{table:P,linbits:13},{table:A,linbits:4},{table:A,linbits:5},{table:A,linbits:6},{table:A,linbits:7},{table:A,linbits:8},{table:A,linbits:9},{table:A,linbits:11},{table:A,linbits:13}],I={44100:[0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],48e3:[0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],32e3:[0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576]},D={44100:[0,4,8,12,16,22,30,40,52,66,84,106,136,192],48e3:[0,4,8,12,16,22,28,38,50,64,80,100,126,192],32e3:[0,4,8,12,16,22,30,42,58,78,104,138,180,192]};function W(e,t){return N.apply(this,arguments)}function N(){return(N=Object(h.a)(i.a.mark((function e(t,a){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a,r="";case 2:if("number"!==typeof n[0]){e.next=4;break}return e.abrupt("return",{value:n,bits:r});case 4:return e.next=6,t.readbits(1);case 6:c=e.sent,n=n[c],r+=c;case 9:e.next=2;break;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,a){return U.apply(this,arguments)}function U(){return(U=Object(h.a)(i.a.mark((function e(t,a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0===a||n<15)){e.next=2;break}return e.abrupt("return",{value:0,linbits:""});case 2:return e.next=4,t.readbits(a);case 4:return r=e.sent,e.abrupt("return",{value:r,linbits:r.toString(2).padStart(a,"0")});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t){return L.apply(this,arguments)}function L(){return(L=Object(h.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readbits(1);case 2:if(!e.sent){e.next=7;break}return e.abrupt("return",{value:-a,sign:"1"});case 7:return e.abrupt("return",{value:a,sign:"0"});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t,a){return Y.apply(this,arguments)}function Y(){return(Y=Object(h.a)(i.a.mark((function e(t,a,n){var r,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n){e.next=2;break}return e.abrupt("return",{value:0,linbits:"",sign:""});case 2:return e.next=4,B(t,a,n);case 4:return r=e.sent,c=n+r.value,e.next=8,H(t,c);case 8:return s=e.sent,e.abrupt("return",{value:s.value,linbits:r.linbits,sign:s.sign});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){return X.apply(this,arguments)}function X(){return(X=Object(h.a)(i.a.mark((function e(t,a){var n,r,c,s,l,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.table){e.next=2;break}return e.abrupt("return",{value:[0,0],huffbits:"",pairbits:[{value:0,linbits:"",sign:""},{value:0,linbits:"",sign:""}]});case 2:return e.next=4,W(t,a.table);case 4:return n=e.sent,r=Object(b.a)(n.value,2),c=r[0],s=r[1],l=n.bits,e.next=11,Z(t,a.linbits,c);case 11:return o=e.sent,e.next=14,Z(t,a.linbits,s);case 14:return u=e.sent,e.abrupt("return",{value:[o.value,u.value],huffbits:l,pairbits:[o,u]});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t){return K.apply(this,arguments)}function K(){return(K=Object(h.a)(i.a.mark((function e(t,a){var n,r,c,s,l,o,u,f,h,d,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,a);case 2:return n=e.sent,r=Object(b.a)(n.value,4),c=r[0],s=r[1],l=r[2],o=r[3],u=n.bits,e.next=11,Z(t,0,c);case 11:return f=e.sent,e.next=14,Z(t,0,s);case 14:return h=e.sent,e.next=17,Z(t,0,l);case 17:return d=e.sent,e.next=20,Z(t,0,o);case 20:return p=e.sent,e.abrupt("return",{value:[f.value,h.value,d.value,p.value],huffbits:u,tuplebits:[f,h,d,p]});case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t,a,n,r){return Q.apply(this,arguments)}function Q(){return(Q=Object(h.a)(i.a.mark((function e(t,a,n,r,c){var s,l,f,h,b,d,p,m,v,y,O,k,x,j,_,w,C,F,M,S,z,R,P,A;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n<=0)){e.next=2;break}return e.abrupt("return",{is:Array(576).fill(0),zero_part_begin:0,bigs:[],ones:[],ones_extra:[]});case 2:if(s=t.tell(),l=a.sideinfo.channel[c].granule[r],f=2===l.block_type&&l.blocksplit_flag,h=E[a.header.sampling_frequency],b=2*l.big_values,d=I[h][f?8:l.region_address1+1],p=Math.min(b,d),m=I[h][f?22:l.region_address1+l.region_address2+2],v=Math.min(b,m),y=[p,v-p,b-v],!(b<v&&576!==m)){e.next=14;break}throw new Error("abnormal negative region2len: bigvalues=".concat(b," < region2start=").concat(v));case 14:if(!(l.blocksplit_flag&&0<y[2])){e.next=16;break}throw new Error("block_split but region2: ".concat(y[2]));case 16:O=[],e.t0=i.a.keys(y);case 18:if((e.t1=e.t0()).done){e.next=49;break}if(k=e.t1.value,0!==(x=y[k])){e.next=23;break}return e.abrupt("continue",18);case 23:if(j=l.table_select[k],(_=q[j]).table||0===j){e.next=27;break}throw new Error("region".concat(k," references bad table: ").concat(j));case 27:w=Object(o.a)(Object(g.a)(x/2)),e.prev=28,w.s();case 30:if((C=w.n()).done){e.next=39;break}return C.value,e.t2=O,e.next=35,J(t,_);case 35:e.t3=e.sent,e.t2.push.call(e.t2,e.t3);case 37:e.next=30;break;case 39:e.next=44;break;case 41:e.prev=41,e.t4=e.catch(28),w.e(e.t4);case 44:return e.prev=44,w.f(),e.finish(44);case 47:e.next=18;break;case 49:if(F=t.tell()-s,!(n<F)){e.next=52;break}throw new Error("big_value exceeds part3_length: ".concat(n," < ").concat(F));case 52:if(!(F<n&&288<=O.length)){e.next=54;break}throw new Error("is already filled but garbage bits");case 54:M=T[l.count1table_select],S=[];case 56:if(!(t.tell()-s<n)){e.next=64;break}return e.t5=S,e.next=60,G(t,M);case 60:e.t6=e.sent,e.t5.push.call(e.t5,e.t6),e.next=56;break;case 64:return z=t.tell()-s,R=[],n<z&&R.push(S.pop()),576<(P=O.flatMap((function(e){return e.value})).concat(S.flatMap((function(e){return e.value})))).length&&P.splice(576,P.length-576),A=P.length,P.push.apply(P,Object(u.a)(Array(576-P.length).fill(0))),e.abrupt("return",{is:P,zero_part_begin:A,bigs:O,ones:S,ones_extra:R});case 72:case"end":return e.stop()}}),e,null,[[28,41,44,47]])})))).apply(this,arguments)}var V=[[0,0],[0,1],[0,2],[0,3],[3,0],[1,1],[1,2],[1,3],[2,1],[2,2],[2,3],[3,1],[3,2],[3,3],[4,2],[4,3]];function ee(e,t,a,n){return te.apply(this,arguments)}function te(){return(te=Object(h.a)(i.a.mark((function e(t,a,n,r){var c,s,l,u,f,h,d,p,m,v,O,k,x,j,_,w,E,C,F,M,S,z,R,P,A,T,q,I,D,W,N,B,U,H,L,Z,Y,J,X,G,K,$,Q,ee,te;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(b.a)(V[a.scalefac_compress],2),s=c[0],l=c[1],2===a.block_type){e.next=36;break}u=[[0,5,s,r[0]],[6,10,s,r[1]],[11,15,l,r[2]],[16,20,l,r[3]]],f=[],h=0,d=u;case 5:if(!(h<d.length)){e.next=35;break}p=Object(b.a)(d[h],4),m=p[0],v=p[1],O=p[2],k=p[3],x=Object(o.a)(Object(y.a)(m,v+1)),e.prev=8,x.s();case 10:if((j=x.n()).done){e.next=24;break}if(j.value,0!==n&&k){e.next=19;break}return e.next=15,t.readbits(O);case 15:_=e.sent,f.push(_),e.next=22;break;case 19:if(2!==a.block_type){e.next=21;break}throw new Error("scfsi=1 is not allowed if block_type===2 (short window)");case 21:f.push(NaN);case 22:e.next=10;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(8),x.e(e.t0);case 29:return e.prev=29,x.f(),e.finish(29);case 32:h++,e.next=5;break;case 35:return e.abrupt("return",{type:"long",scalefac_l:f});case 36:if(!a.switch_point){e.next=103;break}w=[],E=Object(o.a)(Object(y.a)(0,8)),e.prev=39,E.s();case 41:if((C=E.n()).done){e.next=48;break}return F=C.value,e.next=45,t.readbits(s);case 45:w[F]=e.sent;case 46:e.next=41;break;case 48:e.next=53;break;case 50:e.prev=50,e.t1=e.catch(39),E.e(e.t1);case 53:return e.prev=53,E.f(),e.finish(53);case 56:M=[],S=0,z=[[3,5,s],[6,11,l]];case 58:if(!(S<z.length)){e.next=100;break}R=Object(b.a)(z[S],3),P=R[0],A=R[1],T=R[2],q=Object(o.a)(Object(y.a)(P,A+1)),e.prev=61,q.s();case 63:if((I=q.n()).done){e.next=89;break}D=I.value,W=[],N=Object(o.a)(Object(g.a)(3)),e.prev=67,N.s();case 69:if((B=N.n()).done){e.next=78;break}return B.value,e.t2=W,e.next=74,t.readbits(T);case 74:e.t3=e.sent,e.t2.push.call(e.t2,e.t3);case 76:e.next=69;break;case 78:e.next=83;break;case 80:e.prev=80,e.t4=e.catch(67),N.e(e.t4);case 83:return e.prev=83,N.f(),e.finish(83);case 86:M[D]=W;case 87:e.next=63;break;case 89:e.next=94;break;case 91:e.prev=91,e.t5=e.catch(61),q.e(e.t5);case 94:return e.prev=94,q.f(),e.finish(94);case 97:S++,e.next=58;break;case 100:return e.abrupt("return",{type:"mixed",scalefac_l:w,scalefac_s:M});case 103:U=[],H=0,L=[[0,5,s],[6,11,l]];case 105:if(!(H<L.length)){e.next=147;break}Z=Object(b.a)(L[H],3),Y=Z[0],J=Z[1],X=Z[2],G=Object(o.a)(Object(y.a)(Y,J+1)),e.prev=108,G.s();case 110:if((K=G.n()).done){e.next=136;break}$=K.value,Q=[],ee=Object(o.a)(Object(g.a)(3)),e.prev=114,ee.s();case 116:if((te=ee.n()).done){e.next=125;break}return te.value,e.t6=Q,e.next=121,t.readbits(X);case 121:e.t7=e.sent,e.t6.push.call(e.t6,e.t7);case 123:e.next=116;break;case 125:e.next=130;break;case 127:e.prev=127,e.t8=e.catch(114),ee.e(e.t8);case 130:return e.prev=130,ee.f(),e.finish(130);case 133:U[$]=Q;case 134:e.next=110;break;case 136:e.next=141;break;case 138:e.prev=138,e.t9=e.catch(108),G.e(e.t9);case 141:return e.prev=141,G.f(),e.finish(141);case 144:H++,e.next=105;break;case 147:return e.abrupt("return",{type:"short",scalefac_s:U});case 148:case"end":return e.stop()}}),e,null,[[8,26,29,32],[39,50,53,56],[61,91,94,97],[67,80,83,86],[108,138,141,144],[114,127,130,133]])})))).apply(this,arguments)}function ae(e,t,a){if(!a)return e;if("long"!==e.type)return e;for(var n=Object(b.a)(V[t.granule[1].scalefac_compress],2),r=n[0],c=n[1],s=t.scfsi,l=[[0,5,r,s[0]],[6,10,r,s[1]],[11,15,c,s[2]],[16,20,c,s[3]]],i=Object(u.a)(e.scalefac_l),h=0,d=l;h<d.length;h++){var p=Object(b.a)(d[h],4),m=p[0],v=p[1];p[2];if(p[3]){if("long"!==a.type)throw new Error("scfsi but gr0 not long: ".concat(a.type));var g,O=Object(o.a)(Object(y.a)(m,v+1));try{for(O.s();!(g=O.n()).done;){var k=g.value;i[k]=a.scalefac_l[k]}}catch(x){O.e(x)}finally{O.f()}}}return Object(f.a)({},e,{scalefac_l:i})}function ne(e,t){return re.apply(this,arguments)}function re(){return(re=Object(h.a)(i.a.mark((function e(t,a){var n,r,c,s,l,u,f,h,b,d,p,m,v,y,O,x,j,_,w,E,C,F,M;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=R(t,a)){e.next=3;break}return e.abrupt("return",null);case 3:r=new k(n),c=3===a.header.mode,s=c?1:2,l=[],u=Object(o.a)(Object(g.a)(2)),e.prev=8,u.s();case 10:if((f=u.n()).done){e.next=45;break}h=f.value,b=[],d=Object(o.a)(Object(g.a)(s)),e.prev=14,d.s();case 16:if((p=d.n()).done){e.next=34;break}return m=p.value,v=a.sideinfo.channel[m].granule[h],y=r.tell(),O=a.sideinfo.channel[m].scfsi,e.next=23,ee(r,v,h,O);case 23:return x=e.sent,j=ae(x,a.sideinfo.channel[m],0===h?null:l[0].channel[m].scalefac),_=r.tell()-y,w=v.part2_3_length-_,e.next=29,$(r,a,w,h,m);case 29:E=e.sent,r.seek(y+v.part2_3_length),b.push({part2_length:_,part3_length:w,raw_scalefac:x,scalefac:j,is:E});case 32:e.next=16;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(14),d.e(e.t0);case 39:return e.prev=39,d.f(),e.finish(39);case 42:l.push({channel:b});case 43:e.next=10;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(8),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return C=(8-r.tell()%8)%8,e.next=56,r.readbits(C);case 56:return F=e.sent,e.next=59,r.readbytes((r.length-r.tell())/8);case 59:return M=e.sent,e.abrupt("return",{main_data:n,granule:l,ancillary_nbits:C,ancillary_bits:F,ancillary_bytes:M});case 61:case"end":return e.stop()}}),e,null,[[8,47,50,53],[14,36,39,42]])})))).apply(this,arguments)}var ce=function(e){var t=e.map((function(t,a){return e[a+1]-t}));return t.pop(),t},se=function(e,t){return Object.assign.apply(Object,[{}].concat(Object(u.a)(Object.entries(e).map((function(e){var a=Object(b.a)(e,2),n=a[0],r=a[1];return Object(p.a)({},n,t(r))})))))},le=se(I,ce),ie=se(D,ce);function oe(e,t){return Math.pow(Math.abs(e),t)*(e<0?-1:1)}function ue(e,t,a,n){return Math.pow(2,-e*t)*Math.pow(2,.25*(a-210-8*n))}function fe(e,t,a,n,r){return oe(e,4/3)*ue(t,a,n,r)}function he(e,t,a,n,r,c){var s=n.concat([0]).slice(0,c),l=le[e].slice(0,c).flatMap((function(e,t){return Array(e).fill(s[t])}));return r.slice(0,I[e][c]).map((function(e,n){return fe(e,t,l[n],a,0)}))}function be(e,t,a,n,r,c,s){var l,i=ie[e],u=r.concat([[0,0,0]]),f=[],h=3*D[e][s],b=Object(o.a)(Object(y.a)(s,13));try{for(b.s();!(l=b.n()).done;){var d,p=l.value,m=Object(o.a)(Object(g.a)(3));try{for(m.s();!(d=m.n()).done;){var v,O=d.value,k=Object(o.a)(Object(g.a)(i[p]));try{for(k.s();!(v=k.n()).done;){v.value;var x=fe(c[h],t,u[p][O],a,n[O]);h++,f.push(x)}}catch(j){k.e(j)}finally{k.f()}}}catch(j){m.e(j)}finally{m.f()}}}catch(j){b.e(j)}finally{b.f()}return f}var de=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2].concat([0]);function pe(e,t,a){var n,r=t.scalefac_scale?1:.5,c=E[e.header.sampling_frequency],s=a.is.is;switch(a.scalefac.type){case"long":var l=(n=t.preflag,a.scalefac.scalefac_l.map((function(e,t){return e+(n?de[t]:0)})));return{samples:he(c,r,t.global_gain,l,s,22),scalefac_l:l};case"short":return{samples:be(c,r,t.global_gain,t.subblock_gain,a.scalefac.scalefac_s,s,0),scalefac_s:a.scalefac.scalefac_s};case"mixed":var i=he(c,r,t.global_gain,a.scalefac.scalefac_l,s,8),o=be(c,r,t.global_gain,t.subblock_gain,a.scalefac.scalefac_s,s,3);return{samples:i.concat(o),scalefac_l:a.scalefac.scalefac_l,scalefac_s:a.scalefac.scalefac_s}}}function me(e){if(7===e)return null;if(6===e)return[1,0];var t=Math.tan(e*Math.PI/12);return[t/(1+t),1/(1+t)]}function ve(e,t,a,n,r){var c=E[t.header.sampling_frequency],s=Object(g.a)(2,(function(){return{samples:[]}})),l=a.channel[0].scalefac;if("short"===l.type)throw new Error("BadImpl: intensityLongTill but passed short");var i,f=l.scalefac_l.concat([0]),h=Object(o.a)(Object(g.a)(r));try{for(h.s();!(i=h.n()).done;){var d=i.value,p=I[c][d],m=le[c][d];if(p<a.channel[1].is.zero_part_begin){var v,y;(v=s[0].samples).push.apply(v,Object(u.a)(n[0].samples.slice(p,p+m))),(y=s[1].samples).push.apply(y,Object(u.a)(n[1].samples.slice(p,p+m)))}else{var O=me(f[d]);if(O){var k,x=Object(b.a)(O,2),j=x[0],_=x[1],w=Object(o.a)(Object(g.a)(m));try{for(w.s();!(k=w.n()).done;){var C=k.value,F=n[0].samples[p+C];s[0].samples.push(F*j),s[1].samples.push(F*_)}}catch(z){w.e(z)}finally{w.f()}}else{var M,S;(M=s[0].samples).push.apply(M,Object(u.a)(n[0].samples.slice(p,p+m))),(S=s[1].samples).push.apply(S,Object(u.a)(n[1].samples.slice(p,p+m)))}}}}catch(z){h.e(z)}finally{h.f()}return s}function ge(e,t,a,n,r){var c=E[t.header.sampling_frequency],s=Object(g.a)(2,(function(){return{samples:[]}})),l=a.channel[0].scalefac;if("long"===l.type)throw new Error("BadImpl: intensityShortFrom but passed long");var i,f=l.scalefac_s.concat([[0,0,0]]),h=Object(o.a)(Object(y.a)(r,13));try{for(h.s();!(i=h.n()).done;){var d=i.value,p=3*D[c][d],m=ie[c][d];if(p<a.channel[1].is.zero_part_begin){var v,O;(v=s[0].samples).push.apply(v,Object(u.a)(n[0].samples.slice(p,p+3*m))),(O=s[1].samples).push.apply(O,Object(u.a)(n[1].samples.slice(p,p+3*m)))}else{var k,x=Object(o.a)(Object(g.a)(3));try{for(x.s();!(k=x.n()).done;){var j=k.value,_=me(f[d][j]);if(_){var w,C=p+m*j,F=Object(b.a)(_,2),M=F[0],S=F[1],z=Object(o.a)(Object(g.a)(m));try{for(z.s();!(w=z.n()).done;){var R=w.value,P=n[0].samples[C+R];s[0].samples.push(P*M),s[1].samples.push(P*S)}}catch(q){z.e(q)}finally{z.f()}}else{var A,T;(A=s[0].samples).push.apply(A,Object(u.a)(n[0].samples.slice(p,p+m))),(T=s[1].samples).push.apply(T,Object(u.a)(n[1].samples.slice(p,p+m)))}}}catch(q){x.e(q)}finally{x.f()}}}}catch(q){h.e(q)}finally{h.f()}return s}function ye(e,t,a){if(1!==e.header.mode||0===e.header.mode_extension)return a;var n,r=1/Math.sqrt(2),c=[],s=Object(o.a)(Object(g.a)(2));try{var l=function(){var s=n.value,l=a.granule[s].channel;if(0!==(2&e.header.mode_extension)){var i,f=Math.max.apply(Math,Object(u.a)(Object(g.a)(2).map((function(e){return t.granule[s].channel[e].is.zero_part_begin})))),h=[[],[]],d=Object(o.a)(Object(g.a)(f));try{for(d.s();!(i=d.n()).done;){var p=i.value;h[0].push((l[0].samples[p]+l[1].samples[p])*r),h[1].push((l[0].samples[p]-l[1].samples[p])*r)}}catch(k){d.e(k)}finally{d.f()}var m,v=Object(o.a)(Object(y.a)(f,576));try{for(v.s();!(m=v.n()).done;){var O=m.value;h[0].push(l[0].samples[O]),h[1].push(l[1].samples[O])}}catch(k){v.e(k)}finally{v.f()}l=h.map((function(e){return{samples:e}}))}0!==(1&e.header.mode_extension)&&(l=function(e,t,a,n){var r=a.channel[0].scalefac.type;switch(r){case"long":return ve(0,t,a,n,22);case"short":return ge(0,t,a,n,0);case"mixed":var c=ve(0,t,a,n,8),s=Object(b.a)(c,2),l=s[0],i=s[1],o=ge(0,t,a,n,3),u=Object(b.a)(o,2),f=u[0],h=u[1];return[{samples:l.samples.concat(f.samples)},{samples:i.samples.concat(h.samples)}];default:throw new Error("bad scalefac.type: ".concat(r))}}(0,e,t.granule[s],l)),c.push({channel:l})};for(s.s();!(n=s.n()).done;)l()}catch(i){s.e(i)}finally{s.f()}return{granule:c}}var Oe=[-.6,-.535,-.33,-.185,-.095,-.041,-.0142,-.0037],ke=Oe.map((function(e){return 1/Math.sqrt(1+e*e)})),xe=Oe.map((function(e){return e/Math.sqrt(1+e*e)}));function je(e){var t=e.length,a=2*t;return Object(g.a)(a).map((function(n){return e.map((function(e,r){return e*Math.cos(Math.PI/(2*a)*(2*n+1+t)*(2*r+1))})).reduce((function(e,t){return e+t}),0)}))}var _e=[Object(g.a)(36).map((function(e){return Math.sin(Math.PI/36*(e+.5))})),[].concat(Object(y.a)(0,18).map((function(e){return Math.sin(Math.PI/36*(e+.5))})),Array(6).fill(1),Object(y.a)(24,30).map((function(e){return Math.sin(Math.PI/12*(e-18+.5))})),Array(6).fill(0)),Object(g.a)(12).map((function(e){return Math.sin(Math.PI/12*(e+.5))})),[].concat(Array(6).fill(0),Object(y.a)(6,12).map((function(e){return Math.sin(Math.PI/12*(e-6+.5))})),Array(6).fill(1),Object(y.a)(18,36).map((function(e){return Math.sin(Math.PI/36*(e+.5))})))];function we(e,t){if(2!==t)return je(e).map((function(e,a){return e*_e[t][a]}));var a=Object(g.a)(3).map((function(t){return je(Object(y.a)(t,18,3).map((function(t){return e[t]})))})).map((function(e){return e.map((function(e,t){return e*_e[2][t]}))})),n=Array(36).fill(0);return a.forEach((function(e,t){e.forEach((function(e,a){n[6*(1+t)+a]+=e}))})),n}var Ee=[0,-15259e-9,-15259e-9,-15259e-9,-15259e-9,-15259e-9,-15259e-9,-30518e-9,-30518e-9,-30518e-9,-30518e-9,-45776e-9,-45776e-9,-61035e-9,-61035e-9,-76294e-9,-76294e-9,-91553e-9,-106812e-9,-106812e-9,-12207e-8,-137329e-9,-152588e-9,-167847e-9,-198364e-9,-213623e-9,-244141e-9,-259399e-9,-289917e-9,-320435e-9,-366211e-9,-396729e-9,-442505e-9,-473022e-9,-534058e-9,-579834e-9,-62561e-8,-686646e-9,-747681e-9,-808716e-9,-88501e-8,-961304e-9,-.001037598,-.001113892,-.001205444,-.001296997,-.00138855,-.001480103,-.001586914,-.001693726,-.001785278,-.001907349,-.00201416,-.002120972,-.002243042,-.002349854,-.002456665,-.002578735,-.002685547,-.002792358,-.00289917,-.002990723,-.003082275,-.003173828,.003250122,.003326416,.003387451,.003433228,.003463745,.003479004,.003479004,.003463745,.003417969,.003372192,.00328064,.003173828,.003051758,.002883911,.002700806,.002487183,.002227783,.001937866,.001617432,.001266479,869751e-9,442505e-9,-30518e-9,-549316e-9,-.001098633,-.001693726,-.002334595,-.003005981,-.003723145,-.004486084,-.0052948,-.006118774,-.007003784,-.007919312,-.008865356,-.009841919,-.010848999,-.011886597,-.012939453,-.014022827,-.01512146,-.016235352,-.017349243,-.018463135,-.019577026,-.020690918,-.021789551,-.022857666,-.023910522,-.024932861,-.025909424,-.02684021,-.02772522,-.028533936,-.029281616,-.029937744,-.030532837,-.031005859,-.031387329,-.031661987,-.031814575,-.031845093,-.031738281,-.031478882,.031082153,.030517578,.029785156,.028884888,.027801514,.026535034,.025085449,.023422241,.021575928,.01953125,.01725769,.014801025,.012115479,.009231567,.006134033,.002822876,-686646e-9,-.004394531,-.00831604,-.012420654,-.016708374,-.021179199,-.025817871,-.030609131,-.035552979,-.040634155,-.045837402,-.051132202,-.056533813,-.06199646,-.067520142,-.073059082,-.07862854,-.084182739,-.089706421,-.095169067,-.100540161,-.105819702,-.110946655,-.115921021,-.120697021,-.125259399,-.129562378,-.133590698,-.137298584,-.140670776,-.143676758,-.146255493,-.148422241,-.150115967,-.151306152,-.15196228,-.152069092,-.151596069,-.150497437,-.148773193,-.146362305,-.143264771,-.139450073,-.134887695,-.129577637,-.123474121,-.116577148,-.108856201,.100311279,.090927124,.080688477,.069595337,.057617188,.044784546,.031082153,.01651001,.001068115,-.015228271,-.03237915,-.050354004,-.069168091,-.088775635,-.109161377,-.130310059,-.152206421,-.174789429,-.198059082,-.221984863,-.246505737,-.271591187,-.297210693,-.323318481,-.349868774,-.376800537,-.404083252,-.431655884,-.459472656,-.487472534,-.515609741,-.543823242,-.572036743,-.600219727,-.628295898,-.656219482,-.683914185,-.71131897,-.738372803,-.765029907,-.791213989,-.816864014,-.841949463,-.866363525,-.890090942,-.91305542,-.935195923,-.956481934,-.976852417,-.996246338,-1.01461792,-1.031936646,-1.048156738,-1.063217163,-1.07711792,-1.089782715,-1.101211548,-1.111373901,-1.120223999,-1.127746582,-1.133926392,-1.138763428,-1.142211914,-1.144287109,1.144989014,1.144287109,1.142211914,1.138763428,1.133926392,1.127746582,1.120223999,1.111373901,1.101211548,1.089782715,1.07711792,1.063217163,1.048156738,1.031936646,1.01461792,.996246338,.976852417,.956481934,.935195923,.91305542,.890090942,.866363525,.841949463,.816864014,.791213989,.765029907,.738372803,.71131897,.683914185,.656219482,.628295898,.600219727,.572036743,.543823242,.515609741,.487472534,.459472656,.431655884,.404083252,.376800537,.349868774,.323318481,.297210693,.271591187,.246505737,.221984863,.198059082,.174789429,.152206421,.130310059,.109161377,.088775635,.069168091,.050354004,.03237915,.015228271,-.001068115,-.01651001,-.031082153,-.044784546,-.057617188,-.069595337,-.080688477,-.090927124,.100311279,.108856201,.116577148,.123474121,.129577637,.134887695,.139450073,.143264771,.146362305,.148773193,.150497437,.151596069,.152069092,.15196228,.151306152,.150115967,.148422241,.146255493,.143676758,.140670776,.137298584,.133590698,.129562378,.125259399,.120697021,.115921021,.110946655,.105819702,.100540161,.095169067,.089706421,.084182739,.07862854,.073059082,.067520142,.06199646,.056533813,.051132202,.045837402,.040634155,.035552979,.030609131,.025817871,.021179199,.016708374,.012420654,.00831604,.004394531,686646e-9,-.002822876,-.006134033,-.009231567,-.012115479,-.014801025,-.01725769,-.01953125,-.021575928,-.023422241,-.025085449,-.026535034,-.027801514,-.028884888,-.029785156,-.030517578,.031082153,.031478882,.031738281,.031845093,.031814575,.031661987,.031387329,.031005859,.030532837,.029937744,.029281616,.028533936,.02772522,.02684021,.025909424,.024932861,.023910522,.022857666,.021789551,.020690918,.019577026,.018463135,.017349243,.016235352,.01512146,.014022827,.012939453,.011886597,.010848999,.009841919,.008865356,.007919312,.007003784,.006118774,.0052948,.004486084,.003723145,.003005981,.002334595,.001693726,.001098633,549316e-9,30518e-9,-442505e-9,-869751e-9,-.001266479,-.001617432,-.001937866,-.002227783,-.002487183,-.002700806,-.002883911,-.003051758,-.003173828,-.00328064,-.003372192,-.003417969,-.003463745,-.003479004,-.003479004,-.003463745,-.003433228,-.003387451,-.003326416,.003250122,.003173828,.003082275,.002990723,.00289917,.002792358,.002685547,.002578735,.002456665,.002349854,.002243042,.002120972,.00201416,.001907349,.001785278,.001693726,.001586914,.001480103,.00138855,.001296997,.001205444,.001113892,.001037598,961304e-9,88501e-8,808716e-9,747681e-9,686646e-9,62561e-8,579834e-9,534058e-9,473022e-9,442505e-9,396729e-9,366211e-9,320435e-9,289917e-9,259399e-9,244141e-9,213623e-9,198364e-9,167847e-9,152588e-9,137329e-9,12207e-8,106812e-9,106812e-9,91553e-9,76294e-9,76294e-9,61035e-9,61035e-9,45776e-9,45776e-9,30518e-9,30518e-9,30518e-9,30518e-9,15259e-9,15259e-9,15259e-9,15259e-9,15259e-9,15259e-9],Ce=Object(g.a)(64,(function(e){return Object(g.a)(32,(function(t){return Math.cos((16+e)*(2*t+1)*Math.PI/64)}))}));function Fe(e,t,a,n,r){var c=function(e,t){var a,n=3===e.header.mode?1:2,r=[],c=Object(o.a)(Object(g.a)(2));try{for(c.s();!(a=c.n()).done;){var s,l=a.value,i=[],u=Object(o.a)(Object(g.a)(n));try{for(u.s();!(s=u.n()).done;){var f=s.value,h=e.sideinfo.channel[f].granule[l],b=t.granule[l].channel[f];i.push(pe(e,h,b))}}catch(d){u.e(d)}finally{u.f()}r.push({channel:i})}}catch(d){c.e(d)}finally{c.f()}return{granule:r}}(a,n),s=function(e,t){var a,n=3===e.header.mode?1:2,r=[],c=Object(o.a)(Object(g.a)(2));try{for(c.s();!(a=c.n()).done;){var s,l=a.value,i=[],u=Object(o.a)(Object(g.a)(n));try{for(u.s();!(s=u.n()).done;){var f=s.value,h=t.granule[l].channel[f];if(2===e.sideinfo.channel[f].granule[l].block_type){var b,d=E[e.header.sampling_frequency],p=D[d],m=ie[d],v=e.sideinfo.channel[f].granule[l].switch_point?3:0,O=h.samples.slice(0,p[v]),k=Object(o.a)(Object(y.a)(v,13));try{for(k.s();!(b=k.n()).done;){var x,j=b.value,_=m[j],w=Object(o.a)(Object(g.a)(_));try{for(w.s();!(x=w.n()).done;){var C,F=x.value,M=Object(o.a)(Object(g.a)(3));try{for(M.s();!(C=M.n()).done;){var S=C.value;O.push(h.samples[3*p[j]+S*_+F])}}catch(z){M.e(z)}finally{M.f()}}}catch(z){w.e(z)}finally{w.f()}}}catch(z){k.e(z)}finally{k.f()}i.push({samples:O})}else i.push({samples:h.samples})}}catch(z){u.e(z)}finally{u.f()}r.push({channel:i})}}catch(z){c.e(z)}finally{c.f()}return{granule:r}}(a,c),l=ye(a,n,s),i=function(e,t){var a,n=3===e.header.mode?1:2,r=[],c=Object(o.a)(Object(g.a)(2));try{for(c.s();!(a=c.n()).done;){var s,l=a.value,i=[],f=Object(o.a)(Object(g.a)(n));try{for(f.s();!(s=f.n()).done;){var h=s.value,b=t.granule[l].channel[h].samples,d=e.sideinfo.channel[h].granule[l];if(2!==d.block_type||0!==d.switch_point){var p,m=2===d.block_type?2:32,v=Object(u.a)(b.slice(0,18*m)),O=Object(o.a)(Object(y.a)(1,m));try{for(O.s();!(p=O.n()).done;){var k,x=p.value,j=Object(o.a)(Object(g.a)(8));try{for(j.s();!(k=j.n()).done;){var _=k.value,w=18*x-1-_,E=18*x+_,C=v[w]*ke[_]-v[E]*xe[_],F=v[E]*ke[_]+v[w]*xe[_];v[w]=C,v[E]=F}}catch(M){j.e(M)}finally{j.f()}}}catch(M){O.e(M)}finally{O.f()}i.push({samples:v.concat(b.slice(18*m))})}else i.push({samples:b})}}catch(M){f.e(M)}finally{f.f()}r.push({channel:i})}}catch(M){c.e(M)}finally{c.f()}return{granule:r}}(a,l),f=function(e,t,a){var n,r=3===e.header.mode?1:2,c=t||{channel:Object(g.a)(r).map((function(e){return{subband:Object(g.a)(32).map((function(e){return Array(18).fill(0)}))}}))},s=[],l=Object(o.a)(Object(g.a)(2));try{for(l.s();!(n=l.n()).done;){var i,u=n.value,f=[],h=[],b=Object(o.a)(Object(g.a)(r));try{var d=function(){var t,n=i.value,r=a.granule[u].channel[n].samples,s=e.sideinfo.channel[n].granule[u],l=2===s.block_type&&1===s.switch_point,b=[],d=[],p=Object(o.a)(Object(g.a)(32));try{var m=function(){var e=t.value,a=l&&e<2?0:s.block_type,i=we(r.slice(18*e,18*(e+1)),a),o=i.slice(0,18),u=i.slice(18),f=o.map((function(t,a){return t+c.channel[n].subband[e][a]}));b.push(f),d.push(u)};for(p.s();!(t=p.n()).done;)m()}catch(v){p.e(v)}finally{p.f()}f.push({subband:b}),h.push({subband:d})};for(b.s();!(i=b.n()).done;)d()}catch(p){b.e(p)}finally{b.f()}s.push({channel:f}),c={channel:h}}}catch(p){l.e(p)}finally{l.f()}return{granule:s,prevtail:c}}(a,t,i),h={granule:f.granule.map((function(e){return{channel:e.channel.map((function(e){return{subband:e.subband.map((function(e,t){return e.map((function(e,a){return t%2===1&&a%2===1?-e:e}))}))}}))}}))},b=function(e,t,a,n){var r,c=3===e.header.mode?1:2,s=t||{channel:Object(g.a)(2,(function(e){return Object(g.a)(16,(function(e){return Array(64).fill(0)}))}))},l=Object(u.a)(s.channel),i=[],f=Object(o.a)(Object(g.a)(c));try{var h=function(){var e,t=r.value,c=[],s=Object(o.a)(Object(g.a)(2));try{var f=function(){var r,s=e.value,i=Object(o.a)(Object(g.a)(18));try{var f=function(){var e=r.value,i=Object(g.a)(32,(function(n){return a.granule[s].channel[t].subband[n][e]})),o=Object(g.a)(64,(function(e){return Object(g.a)(32,(function(t){return n[t]?i[t]*Ce[e][t]:0})).reduce((function(e,t){return e+t}),0)}));l[t]=[o].concat(Object(u.a)(l[t].slice(0,15)));var f=Object(y.a)(0,16,2).flatMap((function(e){return l[t][e].slice(0,32).concat(l[t][e+1].slice(32))})).map((function(e,t){return e*Ee[t]})),h=Object(g.a)(32,(function(e){return Object(g.a)(16,(function(t){return f[32*t+e]})).reduce((function(e,t){return e+t}),0)}));c.push.apply(c,Object(u.a)(h))};for(i.s();!(r=i.n()).done;)f()}catch(h){i.e(h)}finally{i.f()}};for(s.s();!(e=s.n()).done;)f()}catch(h){s.e(h)}finally{s.f()}i.push(c)};for(f.s();!(r=f.n()).done;)h()}catch(b){f.e(b)}finally{f.f()}return{channel:i,v_vec_q:{channel:l}}}(a,e,h,r);return{channel:b.channel,lastHybridTail:f.prevtail,v_vec_q:b.v_vec_q,internal:{requantized:c,reordered:s,stereoed:l,antialiased:i,hysynthed_timedom:f,freqinved:h,sbsynthed:b}}}function Me(e){return Se.apply(this,arguments)}function Se(){return(Se=Object(h.a)(i.a.mark((function e(t){var a,n,r,c,s,l,o,u,f,b,d,p,m,v,g,y,O,x,j,_,w,E=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=E.length>1&&void 0!==E[1]?E[1]:Object(h.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),n=E.length>2&&void 0!==E[2]?E[2]:null,r=n||Array(32).fill(!0),c=new k(new Uint8Array(t)),s=[],l=[],o=[],u=[],f=null,b=null;case 10:if(c.eof()){e.next=69;break}if(c.findbyte(255)){e.next=13;break}return e.abrupt("break",69);case 13:return d=c.tell(),e.prev=14,e.next=17,M(c);case 17:p=e.sent,s.push(p),e.prev=19,m=[],v=0,g=s.length-2;case 23:if(!(0<=g)){e.next=31;break}if(m.unshift(s[g]),!(511<=(v+=s[g].data.length))){e.next=28;break}return e.abrupt("break",31);case 28:g--,e.next=23;break;case 31:return e.next=33,ne(m,p);case 33:if(!(y=e.sent)){e.next=48;break}return l.push(y),O=Fe(b,f,p,y,r),x=O.channel,j=O.lastHybridTail,_=O.v_vec_q,w=O.internal,f=j,b=_,o.push(x),u.push(w),e.next=43,a({i:s.length-1,frame:p,maindata:y,soundframe:x,internal:w});case 43:if(e.sent){e.next=46;break}return e.abrupt("break",69);case 46:e.next=53;break;case 48:return e.next=50,a({i:s.length-1,frame:p});case 50:if(e.sent){e.next=53;break}return e.abrupt("break",69);case 53:e.next=62;break;case 55:return e.prev=55,e.t0=e.catch(19),e.next=59,a({i:s.length-1,frame:p});case 59:if(e.sent){e.next=62;break}return e.abrupt("break",69);case 62:e.next=67;break;case 64:e.prev=64,e.t1=e.catch(14),c.seek(8*Math.floor(d/8+1));case 67:e.next=10;break;case 69:return e.abrupt("return",{frames:s,maindatas:l,soundframes:o,internals:u});case 70:case"end":return e.stop()}}),e,null,[[14,64],[19,55]])})))).apply(this,arguments)}var ze=function(e){return function(t){var a,n;t.preventDefault();var r=null===(a=t.dataTransfer)||void 0===a||null===(n=a.files)||void 0===n?void 0:n[0];r&&r.arrayBuffer().then(e)}};function Re(e){var t=e.onFileDrop,a=e.children;return r.a.createElement("div",{onDragOver:function(e){return e.preventDefault()},onDrop:ze(t)},a)}var Pe=a(6);function Ae(e){var t=e.data,a=e.onDraw,n=e.onResize,c=Object(Pe.a)(e,["data","onDraw","onResize"]),s=r.a.useRef(null),l=r.a.useState({width:0,height:0}),i=Object(b.a)(l,2),o=i[0],u=i[1];return r.a.useEffect((function(){var e=s.current;if(e){var t=e.offsetWidth,a=e.offsetHeight;e.width=t,e.height=a;var r=function(e,t){e===(null===o||void 0===o?void 0:o.width)&&t===(null===o||void 0===o?void 0:o.height)||(u({width:e,height:t}),null===n||void 0===n||n(e,t))};r(t,a);var c=new ResizeObserver((function(e){var t=e[0].contentRect;r(t.width,t.height)}));return c.observe(e),function(){c.disconnect()}}}),[n,o]),r.a.useEffect((function(){var e=s.current;if(e){var n=e.getContext("2d");n&&a(n,t)}})),r.a.createElement("canvas",Object.assign({},c,{width:"1",height:"1",ref:s}))}function Te(e){var t=e.barHeight,a=e.zoomWidth,n=e.drawWhole,c=e.drawZoom,s=e.onZoom,l=e.zooming,i=e.data,o=Object(Pe.a)(e,["barHeight","zoomWidth","drawWhole","drawZoom","onZoom","zooming","data"]),u=r.a.useState({pos:{x:0,y:0},entered:!1,pressed:!1}),h=Object(b.a)(u,2),d=h[0],p=h[1],m=function(e,t){return Math.max(0,Math.min(e,t))},v=function(e){var t=e.currentTarget,a={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY};p((function(e){return Object(f.a)({},e,{pos:a,entered:!0})})),null===s||void 0===s||s(m(a.x,t.offsetWidth)/t.offsetWidth,d.pressed)};return r.a.createElement(Ae,Object.assign({},o,{data:{data:i,pointer:d},onDraw:function(e,r){var s=e.canvas.width,i=e.canvas.height;if(e.clearRect(0,0,s,i),e.save(),e.translate(0,(i-t)/2),e.beginPath(),e.rect(0,0,s+1,t+1),e.clip(),n(e,s,t,r.data),e.restore(),!1!==l){var o=m("number"===typeof l?l*s:r.pointer.pos.x,s),u=Math.max(0,Math.min(o-a/2,s-a));e.save(),e.translate(u,0),e.beginPath(),e.rect(0,0,a+1,i+1),e.clip(),c(e,o/s,a,i,r.data),e.restore()}},onMouseOver:function(e){var t;v(e),null===(t=o.onMouseOver)||void 0===t||t.call(o,e)},onMouseOut:function(e){var t;p((function(e){return Object(f.a)({},e,{entered:!1})})),null===s||void 0===s||s(null,!1),null===(t=o.onMouseOut)||void 0===t||t.call(o,e)},onMouseMove:function(e){var t;v(e),null===(t=o.onMouseMove)||void 0===t||t.call(o,e)},onPointerDown:function(e){var t;!function(e){e.currentTarget.setPointerCapture(e.pointerId);var t=e.currentTarget,a={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY};p({pos:a,entered:!0,pressed:!0}),null===s||void 0===s||s(m(a.x,t.offsetWidth)/t.offsetWidth,!0)}(e),null===(t=o.onPointerDown)||void 0===t||t.call(o,e)},onPointerUp:function(e){var t;!function(e){e.currentTarget.releasePointerCapture(e.pointerId);var t=e.currentTarget,a={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY};p((function(e){return Object(f.a)({},e,{pos:a,pressed:!1})})),null===s||void 0===s||s(m(a.x,t.offsetWidth)/t.offsetWidth,!1)}(e),null===(t=o.onPointerUp)||void 0===t||t.call(o,e)}}))}function qe(e){var t=e.data,a=e.zoomingPos,n=e.hilight,c=Object(Pe.a)(e,["data","zoomingPos","hilight"]),s=r.a.useRef(),l=r.a.useState(!1),i=Object(b.a)(l,2),o=i[0],u=i[1];return r.a.createElement(Te,Object.assign({},c,{zooming:!(t.length<1)&&(!!o||null!==a&&a),data:{points:t,hilight:n},drawWhole:function(e,t,a,n){if(e.fillStyle="#222",e.globalAlpha=1,e.fillRect(0,0,t,a),!(n.points.length<1)){var r,c,l,i=(c=function(){return n.points.map((function(e){return Array(t).fill(0).map((function(a,n){var r=Math.floor(e.length*n/t),c=Math.max(1,Math.ceil(e.length/t));return e.slice(r,r+c).reduce((function(e,t){return Math.max(e,Math.abs(t))}),0)}))}))},l=[t,n],(r=s).current&&-1===l.findIndex((function(e,t){return r.current.depvals[t]!==e}))||(r.current={depvals:l,value:c()}),r.current.value),o=function(t,n){e.fillStyle=t,e.beginPath(),e.moveTo(0,n[0]),n.forEach((function(t,n){return e.lineTo(n,a/2-a/2*t)})),n.map((function(e,t){return[e,t]})).reverse().forEach((function(t){var n=Object(b.a)(t,2),r=n[0],c=n[1];return e.lineTo(c,a/2+a/2*r)})),e.closePath(),e.fill()};if(n.hilight){e.fillStyle="#228";var u=t/n.points[0].length;e.fillRect(n.hilight[0]*u,0,(n.hilight[1]-n.hilight[0])*u,a)}e.globalAlpha=.5,o("#8f8",i[0]),i[1]&&o("#88f",i[1])}},drawZoom:function(e,t,a,n,r){e.globalAlpha=1,e.fillStyle="#222",e.fillRect(.5,.5,a,n);var c=Math.floor((r.points[0].length-a)*t);r.hilight&&(e.fillStyle="#228",e.fillRect(r.hilight[0]-c,0,r.hilight[1]-r.hilight[0],n));var s=function(t,a){e.strokeStyle=t,e.beginPath(),e.moveTo(1.5,a[0]*n/2+n/2+1+.5),a.forEach((function(t,a){e.lineTo(a+1+.5,t*n/2+n/2+1+.5)})),e.stroke()};s("#8f8",r.points[0].slice(c,c+a)),r.points[1]&&s("#88f",r.points[1].slice(c,c+a)),e.strokeStyle="white",e.strokeRect(.5,.5,a-1,n-1)},onZoom:function(e,t){return o!==t&&u(t)}}))}function Ie(e){var t=e.data,a=e.selectedFrame,n=e.onSelectedFrame,c=Object(Pe.a)(e,["data","selectedFrame","onSelectedFrame"]),s=r.a.useState(!1),l=Object(b.a)(s,2),i=l[0],u=l[1],f=r.a.useState(!1),h=Object(b.a)(f,2),d=h[0],p=h[1],m=function(e,t,a,n,r,c){var s=n[r].frame,l=t/s.totalsize;e.fillStyle="white",e.fillRect(0,0,t,a),e.fillStyle="#cac",e.fillRect(0,0,4*l,a),e.fillStyle="#fdf",e.fillRect(4*l,0,(s.head_side_size-4)*l,a);var i,u=["#afa","#ffa","#fca","#f66","#f6f","#66f"],f=Object(o.a)(n[r].framerefs);try{for(f.s();!(i=f.n()).done;){var h=i.value,b=h.main_i-r,d=b<3?b:(b-3)%(u.length-3)+3;if(e.fillStyle=u[d],h.main_i===c){var p=new OffscreenCanvas(12,12),m=p.getContext("2d");m.fillStyle=u[d],m.fillRect(0,0,p.width,p.height),m.strokeStyle="#ccc",m.lineWidth=4,m.beginPath(),m.moveTo(8,-4),m.lineTo(-4,8),m.stroke(),m.beginPath(),m.moveTo(16,0),m.lineTo(0,16),m.stroke(),e.fillStyle=e.createPattern(p,"repeat")}e.fillRect(h.offset*l,0,h.size*l,a),3<h.size*l&&(e.strokeStyle=h.main_i===c?"#f66":"gray",e.strokeRect(h.offset*l,0,h.size*l,a))}}catch(v){f.e(v)}finally{f.f()}r===c&&(e.strokeStyle="red",e.strokeRect(0,0,t,a))};return null!==a&&t.length<=a&&n(null),r.a.createElement(Te,Object.assign({},c,{drawWhole:function(e,t,a,n){if(e.fillStyle="gray",e.fillRect(0,0,t,a),0<n.parsedFrames.length&&n.parsedFrames.length<t){var r=Math.min(t/n.parsedFrames.length,200);n.parsedFrames.forEach((function(t,c){e.save(),e.translate(1+c*r,1),m(e,r-2,a-2,n.parsedFrames,c,n.selectedFrame),e.restore()}))}},drawZoom:function(e,t,a,n,r){e.fillStyle="gray",e.fillRect(.5,.5,a,n);for(var c=(a-200)/2,s=(r.parsedFrames.length-1)*t,l=Math.min(s+3,r.parsedFrames.length),i=s-1;i<l;i++)if(!(i<0)){var o=Math.floor(i);e.save(),e.translate(220*(o-s)+c,20),m(e,200,n-25,r.parsedFrames,o,r.selectedFrame),e.fillStyle=o===r.selectedFrame?"#f88":"white",e.font="15px sans-serif",e.textBaseline="top",e.fillText("".concat(o,": ").concat(r.parsedFrames[o].frame.offset),0,-15),e.restore()}e.strokeStyle="black",e.strokeRect(.5,.5,a-1,n-1)},zooming:i,data:{parsedFrames:t,selectedFrame:a},onZoom:function(e,r){var c=null!==e&&0<t.length;if(c!==i&&u(c),r!==d&&p(r),e&&(r||d)){var s=Math.floor((t.length-200/220)*e+.5);s!==a&&n(s)}}}))}function De(e){var t=e.data,a=e.granule,n=e.channel,c=e.which,s=Object(Pe.a)(e,["data","granule","channel","which"]);return r.a.createElement(Ae,Object.assign({},s,{data:t,onDraw:function(e,t){var r;e.globalAlpha=1,e.fillStyle="white";var s=e.canvas.width,l=e.canvas.height;if(e.fillRect(0,0,s,l),null===t||void 0===t||null===(r=t.internal)||void 0===r?void 0:r.requantized){var i=function(t,a,n){var r=s/576;e.beginPath(),e.moveTo(t*r+.5,a+.5),e.lineTo(n*r+.5,a+.5),e.stroke()},u=function(t,a,n){var r=[a,n].sort(),c=Object(b.a)(r,2),l=c[0],i=c[1],o=s/576;e.fillRect(o*t,l,o,i-l)},f=E[t.frame.header.sampling_frequency],h=I[f],d=D[f],p=t.frame.sideinfo.channel[n||0].granule[a],m=t.maindata.granule[a].channel[n||0],v=p.scalefac_scale?1:.5,O=p.global_gain,k=function(e,t,a){return Math.max(1,oe(1/e/ue(v,t,O,a),3/4))},x=function(e){var n=t.frame.sideinfo.channel[e].granule[a];return 2!==n.block_type?"long":n.switch_point?"mixed":"short"};if("stereoed"!==c||t.frame.sideinfo.channel.length<2||x(0)===x(1)){var j=x(n||0);!function(t){var a;e.fillStyle="#ddd";var n,r=Object(o.a)(Object(g.a)(t));try{for(r.s();!(n=r.n()).done;){var s=n.value;u(h[s],0,l)}}catch(R){r.e(R)}finally{r.f()}if("stereoed"!==c){var f=null===(a=m.scalefac.scalefac_l)||void 0===a?void 0:a.concat([0]),b=l/2;e.strokeStyle="#eee";var d,p=Object(o.a)(Object(g.a)(t));try{for(p.s();!(d=p.n()).done;){var x,j=d.value,_=f[j],w=h[j],E=h[j+1],C=k(1,_,0),F=Object(o.a)(Object(y.a)(0,8192,C));try{for(F.s();!(x=F.n()).done;){var M=x.value,S=Math.floor(fe(M,v,_,O,0));if(b<S)break;i(w,b-S,E),i(w,b+S,E)}}catch(R){F.e(R)}finally{F.f()}var z=Math.floor(fe(8191,v,_,O,0));i(w,b-z,E),i(w,b+z,E)}}catch(R){p.e(R)}finally{p.f()}}}({long:h.length-1,mixed:8,short:0}[j]),function(t){var a,n,r=null===(a=m.scalefac.scalefac_s)||void 0===a?void 0:a.concat([[0,0,0]]),s=l/2,f="requantized"===c,h=Object(o.a)(Object(y.a)(t,d.length-1));try{for(h.s();!(n=h.n()).done;){var b,x=n.value,j=Object(o.a)(Object(g.a)(3));try{for(j.s();!(b=j.n()).done;){var _=b.value;if(f||0===_){e.fillStyle=0===_?"#ddd":"#eee";var w=3*d[x]+(d[x+1]-d[x])*_;if(u(w,0,l),f){e.strokeStyle="#eee";var E,C=r[x][_],F=p.subblock_gain[_],M=3*d[x]+(d[x+1]-d[x])*(_+1),S=k(1,C,F),z=Object(o.a)(Object(y.a)(0,8192,S));try{for(z.s();!(E=z.n()).done;){var R=E.value,P=Math.floor(fe(R,v,C,O,F));if(s<P)break;i(w,s-P,M),i(w,s+P,M)}}catch(T){z.e(T)}finally{z.f()}var A=Math.floor(fe(8191,v,C,O,F));i(w,s-A,M),i(w,s+A,M)}}}}catch(T){j.e(T)}finally{j.f()}}}catch(T){h.e(T)}finally{h.f()}}({long:d.length-1,mixed:3,short:0}[j])}2===p.block_type&&p.switch_point&&(e.fillStyle="#fdd",u(36,0,l)),e.strokeStyle="#ddd",i(0,l/2,s);var _=t.internal[c].granule[a].channel;if(null!==n){e.fillStyle="red";var w,C=_[n].samples,F=Object(o.a)(Object(g.a)(576));try{for(F.s();!(w=F.n()).done;){var M=w.value;u(M,l/2,(C[M]+1)*l/2)}}catch(q){F.e(q)}finally{F.f()}}else{var S=_.length<2?["red"]:["#0c0","#66f"];for(var z in e.globalAlpha=.5,_){e.fillStyle=S[z];var R,P=_[z].samples,A=Object(o.a)(Object(g.a)(576));try{for(A.s();!(R=A.n()).done;){var T=R.value;u(T,l/2,(P[T]+1)*l/2)}}catch(q){A.e(q)}finally{A.f()}}}}}}))}function We(e){var t=e.data,a=e.granule,n=e.which,c=Object(Pe.a)(e,["data","granule","which"]);return r.a.createElement(Ae,Object.assign({},c,{data:t,onDraw:function(e,t){var r;e.globalAlpha=1,e.fillStyle="white";var c=e.canvas.width,s=e.canvas.height;if(e.fillRect(0,0,c,s),null===t||void 0===t||null===(r=t.internal)||void 0===r?void 0:r.requantized){var l=function(t,a,n){var r=[a,n].sort(),s=Object(b.a)(r,2),l=s[0],i=s[1],o=c/576;e.fillRect(o*t,l,o,i-l)};e.fillStyle="#ddd";var i,u=Object(o.a)(Object(y.a)(0,576,18));try{for(u.s();!(i=u.n()).done;){l(i.value,0,s)}}catch(k){u.e(k)}finally{u.f()}e.strokeStyle="#ddd",function(t,a,n){var r=c/576;e.beginPath(),e.moveTo(t*r+.5,a+.5),e.lineTo(n*r+.5,a+.5),e.stroke()}(0,s/2,c);var f="antialiased"===n?t.internal[n].granule[a].channel.map((function(e){return e.samples})):t.internal[n].granule[a].channel.map((function(e){return e.subband.flat(1)})),h=f.length<2?["red"]:["#0c0","#66f"];for(var d in e.globalAlpha=.5,f){e.fillStyle=h[d];var p,m=f[d],v=Object(o.a)(Object(g.a)(576));try{for(v.s();!(p=v.n()).done;){var O=p.value;l(O,s/2,(m[O]+1)*s/2)}}catch(k){v.e(k)}finally{v.f()}}}}}))}var Ne=function(e){var t=e.desc,a=e.offset,n=e.bits,c=e.value,s=e.hiOffset,l=e.onClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{onClick:function(e){return null===l||void 0===l?void 0:l(a,n)},style:{background:a===s&&0<n?"#ddf":void 0}},r.a.createElement("th",{style:{textAlign:"right",paddingRight:"1em"}},t),r.a.createElement("td",null,c)))},Be=function(e){var t=e.title;return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2,style:{margin:"2px"}},t)))},Ue=function(e){var t=e.color,a=e.title,n=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2,style:{background:t,color:"black",margin:"2px"}},a)),n)},He=function(e){var t=e.children;return r.a.createElement("table",null,r.a.createElement("tbody",null,t))},Le=function(e,t){return e.toString(2).padStart(t,"0")},Ze=function(e,t){return"0x".concat(e.toString(16).padStart(t,"0"))},Ye=function(e){var t=e.header,a=e.field,n=e.desc,c=e.offset,s=e.bits,l=e.human,i=e.hiOffset,o=e.onClick;return r.a.createElement(Ne,{desc:null!==n&&void 0!==n?n:a,offset:c,bits:s,value:"".concat(Le(t[a],s)).concat(l?" (".concat(l(t[a]),")"):""),hiOffset:i,onClick:o})},Je=function(e){var t=e.header,a=e.hiOffset,n=e.onClick;return r.a.createElement(Ue,{color:"#cac",title:"header"},r.a.createElement(Ye,{header:t,field:"syncword",offset:0,bits:12,hiOffset:a,onClick:n}),r.a.createElement(Ye,{header:t,field:"id",desc:"ID",offset:12,bits:1,human:function(e){return e?"MPEG-1":"MPEG-2"},hiOffset:a,onClick:n}),r.a.createElement(Ye,{header:t,field:"layer",offset:13,bits:2,human:function(e){return["???","Layer-3","Layer-2","Layer-1"][e]},hiOffset:a,onClick:n}),r.a.createElement(Ye,{header:t,field:"protection_bit",offset:15,bits:1,human:function(e){return e?"None added":"CRC-16 added"},hiOffset:a,onClick:n}),r.a.createElement(Ye,{header:t,field:"bitrate_index",offset:16,bits:4,human:function(e){return 0===e?"free format":"".concat(F[e-1]," kbps")},hiOffset:a,onClick:n}),r.a.createElement(Ye,{header:t,field:"sampling_frequency",offset:20,bits:2,human:function(e){return[].concat(Object(u.a)(E.map(String)),["<reserved>"])[e]},hiOffset:a,onClick:n}),r.a.createElement(Ye,{header:t,field:"padding_bit",offset:22,bits:1,human:function(e){return e?"padded":"not-padded"},hiOffset:a,onClick:n}),r.a.createElement(Ye,{header:t,field:"private_bit",offset:23,bits:1,human:function(e){return"<undefined>"},hiOffset:a,onClick:n}),r.a.createElement(Ye,{header:t,field:"mode",offset:24,bits:2,human:function(e){return["stereo","joint-stereo","dual-channel","single-channel"][e]},hiOffset:a,onClick:n}),r.a.createElement(Ye,{header:t,field:"mode_extension",offset:26,bits:2,human:function(e){return"".concat(2&e?"MiddleSide":"non-MiddleSide",", ").concat(1&e?"IntensityStereo":"non-IntensityStereo")},hiOffset:a,onClick:n}),r.a.createElement(Ye,{header:t,field:"copyright",offset:28,bits:1,human:function(e){return e?"Copyright-Protected":"not-copyrighted"},hiOffset:a,onClick:n}),r.a.createElement(Ye,{header:t,field:"original",offset:29,bits:1,human:function(e){return e?"original":"copied"},hiOffset:a,onClick:n}),r.a.createElement(Ye,{header:t,field:"emphasis",offset:30,bits:2,human:function(e){return["no-emphasis","50/15us","<reserved>","CCITT_J.17"][e]},hiOffset:a,onClick:n}))},Xe=function(e){var t=e.sideinfo,a=e.granule,n=e.channel,c=e.field,s=e.offset,l=e.bits,i=e.desc,o=e.human,u=e.hiOffset,f=e.onClick;return r.a.createElement(Ne,{desc:null!==i&&void 0!==i?i:c,offset:s,bits:l,value:"".concat(t.channel[n].granule[a][c]).concat(o?" (".concat(o(t.channel[n].granule[a][c]),")"):""),hiOffset:u,onClick:f})},Ge=function(e){var t=e.sideinfo,a=e.gr,n=e.ch,c=e.offset,s=e.hiOffset,l=e.onClick,i=t.channel[n].granule[a];return r.a.createElement(Ue,{color:"#fdf",title:"sideinfo granule ".concat(a," channel ").concat(n)},r.a.createElement(Xe,{sideinfo:t,granule:a,channel:n,field:"part2_3_length",offset:c,bits:12,human:function(e){return"bits"},hiOffset:s,onClick:l}),r.a.createElement(Xe,{sideinfo:t,granule:a,channel:n,field:"big_values",offset:c+12,bits:9,human:function(e){return"* 2 values"},hiOffset:s,onClick:l}),r.a.createElement(Xe,{sideinfo:t,granule:a,channel:n,field:"global_gain",offset:c+12+9,bits:8,human:function(e){return"2 ^ (this / 4), +210 biased"},hiOffset:s,onClick:l}),r.a.createElement(Xe,{sideinfo:t,granule:a,channel:n,field:"scalefac_compress",offset:c+12+9+8,bits:4,human:function(e){return V[e].join(", ")},hiOffset:s,onClick:l}),r.a.createElement(Ne,{desc:"blocksplit_flag",offset:c+12+9+8+4,bits:1,value:"".concat(Number(i.blocksplit_flag)," (").concat(i.blocksplit_flag?"non-normal-window":"normal-window",")"),hiOffset:s,onClick:l}),!1===i.blocksplit_flag?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne,{desc:"block_type",offset:c+34,bits:0,value:"(0) (normal-block)",hiOffset:s,onClick:l}),r.a.createElement(Ne,{desc:"switch_point",offset:c+34,bits:0,value:"(0) (no-switch-point)",hiOffset:s,onClick:l}),r.a.createElement(Ne,{desc:"table_select[0]",offset:c+34,bits:5,value:"".concat(i.table_select[0]),hiOffset:s,onClick:l}),r.a.createElement(Ne,{desc:"table_select[1]",offset:c+34+5,bits:5,value:"".concat(i.table_select[1]),hiOffset:s,onClick:l}),r.a.createElement(Ne,{desc:"table_select[2]",offset:c+34+10,bits:5,value:"".concat(i.table_select[2]),hiOffset:s,onClick:l}),r.a.createElement(Xe,{sideinfo:t,offset:c+34+15,bits:4,granule:a,channel:n,field:"region_address1",hiOffset:s,onClick:l}),r.a.createElement(Xe,{sideinfo:t,offset:c+34+15+4,bits:3,granule:a,channel:n,field:"region_address2",hiOffset:s,onClick:l})):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne,{desc:"block_type",offset:c+34,bits:2,value:"".concat(i.block_type," (").concat(["<reserved normal-block>","start-block","3 short-windows","end-block"][i.block_type],")"),hiOffset:s,onClick:l}),r.a.createElement(Xe,{sideinfo:t,granule:a,channel:n,field:"switch_point",offset:c+34+2,bits:1,human:function(e){return e?"switch-long8-short3":"no-switch-point"},hiOffset:s,onClick:l}),r.a.createElement(Ne,{desc:"table_select[0]",offset:c+34+2+1,bits:5,value:"".concat(i.table_select[0]),hiOffset:s,onClick:l}),r.a.createElement(Ne,{desc:"table_select[1]",offset:c+34+2+1+5,bits:5,value:"".concat(i.table_select[1]),hiOffset:s,onClick:l}),r.a.createElement(Ne,{desc:"table_select[2]",offset:c+34+2+1+10,bits:0,value:"(N/A)",hiOffset:s,onClick:l}),r.a.createElement(Ne,{desc:"subblock_gain[0]",offset:c+34+2+1+10,bits:3,value:"".concat(i.subblock_gain[0]),hiOffset:s,onClick:l}),r.a.createElement(Ne,{desc:"subblock_gain[1]",offset:c+34+2+1+10+3,bits:3,value:"".concat(i.subblock_gain[1]),hiOffset:s,onClick:l}),r.a.createElement(Ne,{desc:"subblock_gain[2]",offset:c+34+2+1+10+6,bits:3,value:"".concat(i.subblock_gain[2]),hiOffset:s,onClick:l}),r.a.createElement(Xe,{sideinfo:t,granule:a,channel:n,field:"region_address1",offset:c+34+2+1+10+9,bits:0,human:function(e){return"fixed"},hiOffset:s,onClick:l}),r.a.createElement(Xe,{sideinfo:t,granule:a,channel:n,field:"region_address2",offset:c+34+2+1+10+9,bits:0,human:function(e){return"fixed"},hiOffset:s,onClick:l})),r.a.createElement(Xe,{sideinfo:t,granule:a,channel:n,field:"preflag",offset:c+34+22,bits:1,human:function(e){return e?"scalefactor-added":"no-scalefactor-added"},hiOffset:s,onClick:l}),r.a.createElement(Xe,{sideinfo:t,granule:a,channel:n,field:"scalefac_scale",offset:c+34+22+1,bits:1,human:function(e){return e?"step 2":"step sqrt 2"},hiOffset:s,onClick:l}),r.a.createElement(Xe,{sideinfo:t,granule:a,channel:n,field:"count1table_select",offset:c+34+22+1+1,bits:1,human:function(e){return e?"table B":"table A"},hiOffset:s,onClick:l}))},Ke=function(e){var t=e.sideinfo,a=e.offset,n=e.hiOffset,c=e.onClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,{color:"#fdf",title:"sideinfo common"},r.a.createElement(Ne,{desc:"main_data_end",offset:a,bits:9,value:Ze(t.main_data_end,3),hiOffset:n,onClick:c}),r.a.createElement(Ne,{desc:"private_bits",offset:a+9,bits:t.channel.length<2?5:3,value:Le(t.private_bits,1===t.channel.length?5:3),hiOffset:n,onClick:c})),t.channel.map((function(e,s){return r.a.createElement(Ue,{key:s,color:"#fdf",title:"sideinfo scalefactor selection information: channel ".concat(s)},e.scfsi.map((function(e,l){return r.a.createElement(Ne,{key:l,desc:"scfsi_band ".concat(["0..5","6..10","11..15","16..20"][l]),offset:a+9+(t.channel.length<2?5:3)+4*s+l,bits:1,value:"".concat(e," (").concat(e?"copy-from-granule-0":"transmitted",")"),hiOffset:n,onClick:c})})))})),[0,1].map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge,{key:"".concat(e,"_0"),sideinfo:t,gr:e,ch:0,offset:a+9+(t.channel.length<2?9:11)+59*e*(t.channel.length<2?1:2),hiOffset:n,onClick:c}),1<t.channel.length&&r.a.createElement(Ge,{key:"".concat(e,"_1"),sideinfo:t,gr:e,ch:1,offset:a+9+11+59*e*2+59,hiOffset:n,onClick:c}))})))};function $e(e){var t=e.parsedFrame,a=e.hiOffset,n=e.onClick;return null===t?r.a.createElement(r.a.Fragment,null):r.a.createElement(He,null,r.a.createElement(Ue,{color:"none",title:"File offset: ".concat(t.frame.offset)}),r.a.createElement(Je,{header:t.frame.header,hiOffset:a,onClick:n}),null===t.frame.crc_check?null:r.a.createElement(Ue,{color:"#dbd",title:"error check"},r.a.createElement(Ne,{desc:"crc_check",offset:32,bits:16,value:Ze(t.frame.crc_check,4),hiOffset:a,onClick:n})),r.a.createElement(Ke,{sideinfo:t.frame.sideinfo,offset:32+(null===t.frame.crc_check?0:16),hiOffset:a,onClick:n}))}var Qe=function(e){var t=e.sideinfo,a=e.maindata,n=e.gr,c=e.ch,s=e.offset,l=e.hiOffset,i=e.onClick,o=t.channel[c].granule[n],f=a.granule[n].channel[c].raw_scalefac,h=a.granule[n].channel[c].scalefac,d=Object(b.a)(V[o.scalefac_compress],2),p=d[0],m=d[1];switch(h.type){case"long":var v=[].concat(Object(u.a)(Object(y.a)(0,11).map((function(e){return p}))),Object(u.a)(Object(y.a)(11,21).map((function(e){return m})))).map((function(e,t){return isNaN(f.scalefac_l[t])?0:e})),g=v.reduce((function(e,t){return[].concat(Object(u.a)(e),[e[e.length-1]+t])}),[0]);return{offset:g[g.length-1],elements:h.scalefac_l.map((function(e,t){return r.a.createElement(Ne,{key:t,desc:"long[".concat(t,"]"),offset:s+g[t],bits:v[t],value:isNaN(f.scalefac_l[t])?"(".concat(e,") (copied)"):"".concat(e," (").concat(v[t]," bits)"),hiOffset:l,onClick:i})}))};case"short":var O=[].concat(Object(u.a)(Object(y.a)(0,6).map((function(e){return p}))),Object(u.a)(Object(y.a)(6,12).map((function(e){return m})))),k=O.reduce((function(e,t){return[].concat(Object(u.a)(e),[e[e.length-1]+3*t])}),[0]);return{offset:k[k.length-1],elements:h.scalefac_s.flatMap((function(e,t){return e.map((function(e,a){return r.a.createElement(Ne,{key:"".concat(t,"_").concat(a),desc:"short[".concat(t,"][").concat(a,"]"),offset:s+k[t]+O[t]*a,bits:O[t],value:"".concat(e," (").concat(O[t]," bits)"),hiOffset:l,onClick:i})}))}))};case"mixed":var x=Object(u.a)(Object(y.a)(0,8).map((function(e){return p}))),j=[].concat(Object(u.a)(Object(y.a)(0,3).map((function(e){return 0}))),Object(u.a)(Object(y.a)(3,6).map((function(e){return p}))),Object(u.a)(Object(y.a)(6,12).map((function(e){return m})))),_=x.reduce((function(e,t){return[].concat(Object(u.a)(e),[e[e.length-1]+t])}),[0]),w=j.reduce((function(e,t){return[].concat(Object(u.a)(e),[e[e.length-1]+3*t])}),[_[_.length-1]]);return{offset:w[w.length-1],elements:h.scalefac_l.map((function(e,t){return r.a.createElement(Ne,{key:"long_".concat(t),desc:"long[".concat(t,"]"),offset:s+_[t],bits:x[t],value:"".concat(e," (").concat(x[t]," bits)"),hiOffset:l,onClick:i})})).concat(h.scalefac_s.flatMap((function(e,t){return e.map((function(e,a){return r.a.createElement(Ne,{key:"short_".concat(t,"_").concat(a),desc:"short[".concat(t,"][").concat(a,"]"),offset:s+w[t]+j[t]*a,bits:j[t],value:"".concat(e," (").concat(j[t]," bits)"),hiOffset:l,onClick:i})}))})))}}},Ve=function(e){var t,a=e.maindata,n=e.gr,c=e.ch,s=e.offset,l=e.hiOffset,i=e.onClick,u=a.granule[n].channel[c],f=[],h=Object(o.a)(u.is.bigs.map((function(e,t){return[e,t]})));try{for(h.s();!(t=h.n()).done;){var d=Object(b.a)(t.value,2),p=d[0],m=d[1];f.push(r.a.createElement(Ne,{key:"big_pair_".concat(m),desc:"big.pair[".concat(2*m,",").concat(2*m+1,"]"),offset:s,bits:p.huffbits.length,value:"".concat(p.huffbits," (").concat(p.value.map((function(e){return Math.min(15,Math.abs(e))})),")"),hiOffset:l,onClick:i})),s+=p.huffbits.length;var v,g=Object(o.a)(p.pairbits.map((function(e,t){return[e,t]})));try{for(g.s();!(v=g.n()).done;){var y=Object(b.a)(v.value,2),O=y[0],k=y[1];O.linbits&&(f.push(r.a.createElement(Ne,{key:"big_linbits_".concat(m,"_").concat(k),desc:"big.linbits[".concat(2*m+k,"]"),offset:s,bits:O.linbits.length,value:"+".concat(Math.abs(O.value)-15),hiOffset:l,onClick:i})),s+=O.linbits.length),O.sign&&(f.push(r.a.createElement(Ne,{key:"big_sign_".concat(m,"_").concat(k),desc:"big.sign[".concat(2*m+k,"]"),offset:s,bits:O.sign.length,value:"".concat(O.sign," (-> ").concat(O.value,")"),hiOffset:l,onClick:i})),s+=O.sign.length)}}catch(L){g.e(L)}finally{g.f()}}}catch(L){h.e(L)}finally{h.f()}var x,j=2*u.is.bigs.length,_=Object(o.a)(u.is.ones.map((function(e,t){return[e,t]})));try{for(_.s();!(x=_.n()).done;){var w=Object(b.a)(x.value,2),E=w[0],C=w[1];f.push(r.a.createElement(Ne,{key:"one_pair_".concat(C),desc:"one.tuple[".concat(j+4*C,"..").concat(j+4*C+3,"]"),offset:s,bits:E.huffbits.length,value:"".concat(E.huffbits," (").concat(E.value.map(Math.abs),")"),hiOffset:l,onClick:i})),s+=E.huffbits.length;var F,M=Object(o.a)(E.tuplebits.map((function(e,t){return[e,t]})));try{for(M.s();!(F=M.n()).done;){var S=Object(b.a)(F.value,2),z=S[0],R=S[1];z.sign&&(f.push(r.a.createElement(Ne,{key:"one_sign_".concat(C,"_").concat(R),desc:"one.sign[".concat(j+4*C+R,"]"),offset:s,bits:z.sign.length,value:"".concat(z.sign," (-> ").concat(z.value,")"),hiOffset:l,onClick:i})),s+=z.sign.length)}}catch(L){M.e(L)}finally{M.f()}}}catch(L){_.e(L)}finally{_.f()}var P,A=2*u.is.bigs.length+4*u.is.ones.length,T=Object(o.a)(u.is.ones_extra.map((function(e,t){return[e,t]})));try{for(T.s();!(P=T.n()).done;){var q=Object(b.a)(P.value,2),I=q[0],D=q[1];f.push(r.a.createElement(Ne,{key:"oneextra_pair_".concat(D),desc:"(one.tuple[".concat(A+4*D,"..").concat(A+4*D+3,"])"),offset:s,bits:I.huffbits.length,value:"".concat(I.huffbits," (").concat(I.value.map(Math.abs),")"),hiOffset:l,onClick:i})),s+=I.huffbits.length;var W,N=Object(o.a)(I.tuplebits.map((function(e,t){return[e,t]})));try{for(N.s();!(W=N.n()).done;){var B=Object(b.a)(W.value,2),U=B[0],H=B[1];U.sign&&(f.push(r.a.createElement(Ne,{key:"oneextra_sign_".concat(D,"_").concat(H),desc:"(one.sign[".concat(A+4*D+H,"])"),offset:s,bits:U.sign.length,value:"".concat(U.sign," (-> ").concat(U.value,")"),hiOffset:l,onClick:i})),s+=U.sign.length)}}catch(L){N.e(L)}finally{N.f()}}}catch(L){T.e(L)}finally{T.f()}return 0<f.length?f:r.a.createElement(Be,{title:"(nothing)"})},et=function(e){var t=e.sideinfo,a=e.maindata,n=e.hiOffset,c=e.onClick;if(!t||!a)return r.a.createElement(r.a.Fragment,null);var s,l=[],i=0,u=Object(o.a)(Object(g.a)(2));try{for(u.s();!(s=u.n()).done;){var f,h=s.value,b=Object(o.a)(Object(g.a)(t.channel.length));try{for(b.s();!(f=b.n()).done;){var d=f.value,p=Qe({sideinfo:t,maindata:a,gr:h,ch:d,offset:i,hiOffset:n,onClick:c});l.push(r.a.createElement(Ue,{key:"scalefac_".concat(d,"_").concat(h),color:"#eee",title:"scalefactors channel ".concat(d," granule ").concat(h)},p.elements));var m=Ve({maindata:a,gr:h,ch:d,offset:i+p.offset,hiOffset:n,onClick:c});l.push(r.a.createElement(Ue,{key:"huffman_".concat(d,"_").concat(h),color:"#eee",title:"huffmans channel ".concat(d," granule ").concat(h)},m)),i+=t.channel[d].granule[h].part2_3_length}}catch(v){b.e(v)}finally{b.f()}}}catch(v){u.e(v)}finally{u.f()}return r.a.createElement(He,null,l)},tt=(a(29),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.toString(16).toUpperCase().padStart(t,"0")});function at(e,t){if(!e)return"";if(e.offset+e.bits<=t||t+8<=e.offset)return"";if(e.offset<=t&&t+8<=e.offset+e.bits)return"select";var a=t<e.offset,n=e.offset+e.bits<t+8;return a&&n?"select-part":a?"select-begin":"select-end"}function nt(e,t){return e&&e.offset<t&&t<e.offset+e.bits?"select":""}var rt=function(e){var t=e.data,a=e.hilight;return r.a.createElement("div",{style:{fontFamily:"monospace"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{className:"header address",style:{flexShrink:0}},"\xa0".repeat(4)),r.a.createElement("div",{className:"header spacer",style:{flexShrink:0}}),Object(g.a)(16,(function(e){return r.a.createElement("div",{key:"col_".concat(e),className:"header hex",style:{flexShrink:0}},"+",tt(e))})).flatMap((function(e,t){return[t?r.a.createElement("div",{key:"space_".concat(t),className:"header spacer",style:{flexShrink:0}}):null,e]}))),Object(g.a)(Math.ceil(t.length/16),(function(e){return r.a.createElement("div",{key:e,style:{display:"flex"}},r.a.createElement("div",{className:"header address",style:{flexShrink:0}},tt(16*e,4)),r.a.createElement("div",{className:"spacer",style:{flexShrink:0}}),Object(g.a)(16,(function(n){return r.a.createElement("div",{key:"col_".concat(n),className:"hex "+at(a,8*(16*e+n)),style:{flexShrink:0}},16*e+n<t.length?tt(t[16*e+n],2):null)})).flatMap((function(t,n){return[n?r.a.createElement("div",{key:"space_".concat(n),className:"spacer "+nt(a,8*(16*e+n)),style:{flexShrink:0}}):null,t]})))})))},ct=function(e){var t=r.a.useRef(null);return r.a.createElement("details",{open:e.open,onToggle:function(a){var n;return null===(n=e.setOpen)||void 0===n?void 0:n.call(e,t.current.open)},ref:t},r.a.createElement("summary",{style:{cursor:"pointer"}},e.summary),e.open&&e.children)},st=function(e){var t=null!==e.selectedFrame&&e.selectedFrame<e.parsed.parsedFrames.length?e.parsed.parsedFrames[e.selectedFrame]:null,a={width:"576px",height:"150px",margin:"2px 0"};return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",margin:"10px 5px"}},"stereoed"===e.which?r.a.createElement(De,{style:a,data:t,granule:e.granule,channel:null,which:e.which}):r.a.createElement(r.a.Fragment,null,r.a.createElement(De,{style:a,data:t,granule:e.granule,channel:0,which:e.which}),1<e.parsed.sounds.length?r.a.createElement(De,{style:a,data:t,granule:e.granule,channel:1,which:e.which}):r.a.createElement(r.a.Fragment,null)))},lt=function(e){return r.a.createElement(ct,{summary:"".concat(e.title,":"),open:e.open,setOpen:e.setOpen},r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",margin:"-10px -5px"}},r.a.createElement(st,{parsed:e.parsed,selectedFrame:e.selectedFrame,granule:0,which:e.which}),r.a.createElement(st,{parsed:e.parsed,selectedFrame:e.selectedFrame,granule:1,which:e.which})))},it=function(e){var t=null!==e.selectedFrame&&e.selectedFrame<e.parsed.parsedFrames.length?e.parsed.parsedFrames[e.selectedFrame]:null;return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",margin:"10px 5px"}},r.a.createElement(We,{style:{width:"576px",height:"150px",margin:"2px 0"},data:t,granule:e.granule,which:e.which}))},ot=function(e){return r.a.createElement(ct,{summary:"".concat(e.title,":"),open:e.open,setOpen:e.setOpen},r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",margin:"-10px -5px"}},r.a.createElement(it,{parsed:e.parsed,selectedFrame:e.selectedFrame,granule:0,which:e.which}),r.a.createElement(it,{parsed:e.parsed,selectedFrame:e.selectedFrame,granule:1,which:e.which})))};var ut=function(){var e=r.a.useState(Array(32).fill(!0)),t=Object(b.a)(e,2),a=t[0],n=t[1],c=r.a.useState({sounds:[],parsedFrames:[]}),s=Object(b.a)(c,2),l=s[0],p=s[1],m=r.a.useState(null),v=Object(b.a)(m,2),g=v[0],y=v[1],O=r.a.useState(null),k=Object(b.a)(O,2),x=k[0],j=k[1],_=r.a.useState(!1),w=Object(b.a)(_,2),C=w[0],F=w[1],M=r.a.useRef(!1),S=r.a.useState(null),z=Object(b.a)(S,2),R=z[0],P=z[1],A=r.a.useState({ctx:null,start:0,pos:0,period:0}),T=Object(b.a)(A,2),q=T[0],I=T[1],D=r.a.useRef(null),W=r.a.useState(!1),N=Object(b.a)(W,2),B=N[0],U=N[1],H=r.a.useState(null),L=Object(b.a)(H,2),Z=L[0],Y=L[1],J=r.a.useState(null),X=Object(b.a)(J,2),G=X[0],K=X[1];function $(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(h.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=4;break}return M.current=!0,e.next=4,new Promise((function(e){return setTimeout(e,0)}));case 4:return y(0),j(null),p(n={sounds:[],parsedFrames:[]}),F(!0),M.current=!1,e.next=12,new Promise((function(e){return setTimeout(e,0)}));case 12:return e.next=14,Me(t,function(){var e=Object(h.a)(i.a.mark((function e(t){var a,r,c,s,l,f,h,b,d,m,v,g,O,k,x;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(t.i+1),n={sounds:Object(u.a)(n.sounds),parsedFrames:[].concat(Object(u.a)(n.parsedFrames),[{frame:t.frame,maindata:t.maindata,internal:t.internal,framerefs:[]}])},!t.maindata){e.next=55;break}if(!(0<(a=t.maindata.main_data.length-t.maindata.ancillary_bytes.length))){e.next=55;break}r=null,c=n.parsedFrames.length-1,s=t.frame.sideinfo.main_data_end;case 9:if(!(0<s&&0<=c)){e.next=20;break}if(c--,l=n.parsedFrames[c],f=l.frame.data.length,h=Math.min(s,f),r=l.frame.totalsize-h,!((s-=h)<=0)){e.next=18;break}return e.abrupt("break",20);case 18:e.next=9;break;case 20:if(!(c<0)){e.next=22;break}throw new Error("ref overruns: frame=".concat(t.i," remain=").concat(s));case 22:b=t.maindata.granule.flatMap((function(e,t){return e.channel.flatMap((function(e,a){return[{granule:t,channel:a,part:"scalefac",size:e.part2_length/8},{granule:t,channel:a,part:"huffman",size:e.part3_length/8}]}))})),a-=t.maindata.ancillary_nbits;case 24:if(!(0<a)){e.next=55;break}d=n.parsedFrames[c],m=null!==r?r:d.frame.head_side_size,v=Object(o.a)(b),e.prev=28,v.s();case 30:if((g=v.n()).done){e.next=42;break}if(O=g.value,k=d.frame.totalsize-m,!((x=Math.min(O.size,k))<1/8)){e.next=36;break}return e.abrupt("continue",40);case 36:n.parsedFrames[c].framerefs.push({main_i:t.i,maindata:t.maindata,granule:O.granule,channel:O.channel,part:O.part,offset:m,size:x}),m+=x,a-=x,O.size-=x;case 40:e.next=30;break;case 42:e.next=47;break;case 44:e.prev=44,e.t0=e.catch(28),v.e(e.t0);case 47:return e.prev=47,v.f(),e.finish(47);case 50:for(;0<b.length&&b[0].size<1/8;)b.shift();r=null;case 52:c++,e.next=24;break;case 55:t.soundframe&&t.soundframe.forEach((function(e,t){var a;return(a=n.sounds[t]||(n.sounds[t]=[])).push.apply(a,Object(u.a)(e))})),p(n);case 57:return e.next=59,new Promise((function(e){return setTimeout(e,0)}));case 59:return e.abrupt("return",!M.current);case 60:case"end":return e.stop()}}),e,null,[[28,44,47,50]])})));return function(t){return e.apply(this,arguments)}}(),a);case 14:return p(n),y(n.parsedFrames.length),j(n.parsedFrames.filter((function(e){return e.maindata})).length),F(!1),e.next=20,new Promise((function(e){return setTimeout(e,0)}));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(B&&q.ctx){D.current&&cancelAnimationFrame(D.current),D.current=requestAnimationFrame((function(){I((function(e){return Object(f.a)({},e,{pos:e.ctx.currentTime-e.start})})),P(Math.floor(q.pos/q.period*l.parsedFrames.length))}))}var V=r.a.useState(!1),ee=Object(b.a)(V,2),te=ee[0],ae=ee[1],ne=r.a.useState(!1),re=Object(b.a)(ne,2),ce=re[0],se=re[1],le=r.a.useState(!1),ie=Object(b.a)(le,2),oe=ie[0],ue=ie[1],fe=r.a.useState(!1),he=Object(b.a)(fe,2),be=he[0],de=he[1],pe=r.a.useState(!1),me=Object(b.a)(pe,2),ve=me[0],ge=me[1],ye=r.a.useState(!1),Oe=Object(b.a)(ye,2),ke=Oe[0],xe=Oe[1],je=r.a.useState(!1),_e=Object(b.a)(je,2),we=_e[0],Ee=_e[1],Ce=r.a.useState(!1),Fe=Object(b.a)(Ce,2),Se=Fe[0],ze=Fe[1],Pe=function(e){[ae,se,ue,de,ge,xe,Ee,ze].forEach((function(t){return t(e)}))},Ae=null===R?void 0:[1152*R,1152*R+1152],Te=r.a.useRef(null);return r.a.createElement(Re,{onFileDrop:$},r.a.createElement("div",{style:{width:"100%",background:"#ccc",color:"#000",padding:"0px 2em",boxSizing:"border-box"}},r.a.createElement("p",null,"Drop a MP3 file into here, or ",r.a.createElement("button",{onClick:function(e){var t;return null===(t=Te.current)||void 0===t?void 0:t.click()}},"specify a MP3 file"),r.a.createElement("input",{type:"file",style:{display:"none"},onChange:function(e){var t,a;null===(t=null===(a=e.currentTarget.files)||void 0===a?void 0:a[0])||void 0===t||t.arrayBuffer().then($),e.currentTarget.value=""},ref:Te})),r.a.createElement("p",null,r.a.createElement("button",{style:{display:C?"inline":"none"},onClick:function(){M.current=!0}},"abort"),null===g?"info shown here":null===x?"".concat(g,"..."):"".concat(g," / ").concat(x)),r.a.createElement("p",null,function(){var e=l.parsedFrames[0];if(!e)return"";var t=e.frame.header;return r.a.createElement(r.a.Fragment,null,E[t.sampling_frequency]," Hz ",3===t.mode?1:2," ch")}()),r.a.createElement("div",null,r.a.createElement("p",null,"Final output:"),r.a.createElement("p",null,r.a.createElement(qe,{style:{width:"100%",height:100},barHeight:60,zoomWidth:300,data:l.sounds,zoomingPos:B&&q.ctx?q.pos/q.period:null,hilight:Ae}))),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(e){return Pe(!0)}},"Open all"),r.a.createElement("button",{onClick:function(e){return Pe(!1)}},"Close all")),r.a.createElement(ot,{parsed:l,selectedFrame:R,title:"FreqInverted",which:"freqinved",open:te,setOpen:ae}),r.a.createElement(ot,{parsed:l,selectedFrame:R,title:"HybridSynthed",which:"hysynthed_timedom",open:ce,setOpen:se}),r.a.createElement(ot,{parsed:l,selectedFrame:R,title:"Antialiased",which:"antialiased",open:oe,setOpen:ue}),r.a.createElement(lt,{parsed:l,selectedFrame:R,title:"Stereoed",which:"stereoed",open:be,setOpen:de}),r.a.createElement(lt,{parsed:l,selectedFrame:R,title:"Reordered (only short-windows)",which:"reordered",open:ve,setOpen:ge}),r.a.createElement(lt,{parsed:l,selectedFrame:R,title:"Requantized",which:"requantized",open:ke,setOpen:xe}),r.a.createElement(ct,{summary:"Maindata in bytes:",open:we,setOpen:Ee},r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row"}},r.a.createElement("div",{style:{width:"50%",height:"15em",overflow:"auto",border:"2px inset",boxSizing:"border-box"}},r.a.createElement(et,{sideinfo:null===R||l.parsedFrames.length<=R?null:l.parsedFrames[R].frame.sideinfo,maindata:null===R||l.parsedFrames.length<=R?null:l.parsedFrames[R].maindata||null,hiOffset:G?G.offset:null,onClick:function(e,t){t&&K({offset:e,bits:t})}})),r.a.createElement("div",{style:{width:"50%",height:"15em",border:"2px inset",boxSizing:"border-box",overflow:"auto"}},r.a.createElement(rt,{data:null===R||l.parsedFrames.length<=R||null===l.parsedFrames[R].maindata?new Uint8Array(0):l.parsedFrames[R].maindata.main_data,hilight:G})))),r.a.createElement(ct,{summary:"Frame header in bytes:",open:Se,setOpen:ze},r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row"}},r.a.createElement("div",{style:{width:"50%",height:"15em",overflow:"auto",border:"2px inset",boxSizing:"border-box"}},r.a.createElement($e,{parsedFrame:null===R||l.parsedFrames.length<=R?null:l.parsedFrames[R],hiOffset:Z?Z.offset:null,onClick:function(e,t){t&&Y({offset:e,bits:t})}})),r.a.createElement("div",{style:{width:"50%",height:"15em",border:"2px inset",boxSizing:"border-box",overflow:"auto"}},r.a.createElement(rt,{data:null===R||l.parsedFrames.length<=R?new Uint8Array(0):l.parsedFrames[R].frame.head_side_bytes,hilight:Z})))),r.a.createElement("div",null,r.a.createElement("p",null,"Frames:"),r.a.createElement("p",null,r.a.createElement(Ie,{style:{width:"100%",height:60},barHeight:30,zoomWidth:300,data:l.parsedFrames,selectedFrame:R,onSelectedFrame:function(e){return P(e)}}))),r.a.createElement(d,{checks:a,onChanged:n}),r.a.createElement("p",null,r.a.createElement("button",{disabled:l.parsedFrames.length<1,onClick:function(){var e=new Int16Array(Array(l.sounds[0].length).fill(0).flatMap((function(e,t){return l.sounds.map((function(e){return 32767*Math.min(Math.max(e[t],-1),1)}))}))),t=URL.createObjectURL(new Blob([e.buffer],{type:"application/octet-stream"})),a=document.createElement("a");document.body.appendChild(a),a.href=t,a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)}},"download raw sample")),r.a.createElement("p",null,r.a.createElement("button",{disabled:l.parsedFrames.length<1,onClick:function(){var e=new AudioContext,t=e.createBuffer(l.sounds.length,l.sounds[0].length,E[l.parsedFrames[0].frame.header.sampling_frequency]);Array(l.sounds.length).fill(0).forEach((function(e,a){var n=t.getChannelData(a);l.sounds[a].forEach((function(e,t){n[t]=e}))}));var a=e.createBufferSource();a.buffer=t,a.connect(e.destination),a.onended=function(){cancelAnimationFrame(D.current),D.current=null,I((function(e){return Object(f.a)({},e,{ctx:null})}))},a.start(),I({ctx:e,start:e.currentTime,pos:0,period:l.sounds[0].length/E[l.parsedFrames[0].frame.header.sampling_frequency]})}},"play sample")," ",r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:B,onChange:function(e){return U(e.target.checked)}}),"follow playing")),r.a.createElement("p",{style:{overflow:"hidden",height:"3.5em"}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ut,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.73fbca6a.chunk.js.map